"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/huggingface/meta/route";
exports.ids = ["app/api/huggingface/meta/route"];
exports.modules = {

/***/ "better-sqlite3":
/*!*********************************!*\
  !*** external "better-sqlite3" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("better-sqlite3");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fhuggingface%2Fmeta%2Froute&page=%2Fapi%2Fhuggingface%2Fmeta%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fhuggingface%2Fmeta%2Froute.ts&appDir=%2Fapp%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fhuggingface%2Fmeta%2Froute&page=%2Fapi%2Fhuggingface%2Fmeta%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fhuggingface%2Fmeta%2Froute.ts&appDir=%2Fapp%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _app_app_api_huggingface_meta_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/huggingface/meta/route.ts */ \"(rsc)/./app/api/huggingface/meta/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/huggingface/meta/route\",\n        pathname: \"/api/huggingface/meta\",\n        filename: \"route\",\n        bundlePath: \"app/api/huggingface/meta/route\"\n    },\n    resolvedPagePath: \"/app/app/api/huggingface/meta/route.ts\",\n    nextConfigOutput,\n    userland: _app_app_api_huggingface_meta_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/huggingface/meta/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZodWdnaW5nZmFjZSUyRm1ldGElMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmh1Z2dpbmdmYWNlJTJGbWV0YSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmh1Z2dpbmdmYWNlJTJGbWV0YSUyRnJvdXRlLnRzJmFwcERpcj0lMkZhcHAlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRmFwcCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDVjtBQUNuRTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3ZlY3Rvci10ZXN0ZXIvP2RhNzYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL2FwcC9hcHAvYXBpL2h1Z2dpbmdmYWNlL21ldGEvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2h1Z2dpbmdmYWNlL21ldGEvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9odWdnaW5nZmFjZS9tZXRhXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9odWdnaW5nZmFjZS9tZXRhL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL2FwcC9hcHAvYXBpL2h1Z2dpbmdmYWNlL21ldGEvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2h1Z2dpbmdmYWNlL21ldGEvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fhuggingface%2Fmeta%2Froute&page=%2Fapi%2Fhuggingface%2Fmeta%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fhuggingface%2Fmeta%2Froute.ts&appDir=%2Fapp%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/huggingface/meta/route.ts":
/*!*******************************************!*\
  !*** ./app/api/huggingface/meta/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PATCH: () => (/* binding */ PATCH)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n\n\n\nconst updateSchema = zod__WEBPACK_IMPORTED_MODULE_2__.object({\n    id: zod__WEBPACK_IMPORTED_MODULE_2__.number(),\n    active: zod__WEBPACK_IMPORTED_MODULE_2__.boolean().optional(),\n    detailed: zod__WEBPACK_IMPORTED_MODULE_2__.boolean().optional(),\n    extensive: zod__WEBPACK_IMPORTED_MODULE_2__.boolean().optional()\n});\nfunction GET() {\n    const metadata = (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.getHuggingfaceMetaTags)();\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        metadata\n    });\n}\nasync function PATCH(request) {\n    const payload = await request.json();\n    const parsed = updateSchema.safeParse(payload);\n    if (!parsed.success) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Invalid payload\",\n            details: parsed.error.flatten()\n        }, {\n            status: 400\n        });\n    }\n    try {\n        const updated = (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.updateHuggingfaceMetaTag)(parsed.data);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            meta: updated\n        });\n    } catch (error) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to update metadata entry\",\n            details: error instanceof Error ? error.message : \"Unknown error occurred\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2h1Z2dpbmdmYWNlL21ldGEvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBMkM7QUFDbkI7QUFJTjtBQUVsQixNQUFNSSxlQUFlSCx1Q0FBUSxDQUFDO0lBQzVCSyxJQUFJTCx1Q0FBUTtJQUNaTyxRQUFRUCx3Q0FBUyxHQUFHUyxRQUFRO0lBQzVCQyxVQUFVVix3Q0FBUyxHQUFHUyxRQUFRO0lBQzlCRSxXQUFXWCx3Q0FBUyxHQUFHUyxRQUFRO0FBQ2pDO0FBRU8sU0FBU0c7SUFDZCxNQUFNQyxXQUFXWiwrREFBc0JBO0lBQ3ZDLE9BQU9GLHFEQUFZQSxDQUFDZSxJQUFJLENBQUM7UUFBRUQ7SUFBUztBQUN0QztBQUVPLGVBQWVFLE1BQU1DLE9BQWdCO0lBQzFDLE1BQU1DLFVBQVUsTUFBTUQsUUFBUUYsSUFBSTtJQUNsQyxNQUFNSSxTQUFTZixhQUFhZ0IsU0FBUyxDQUFDRjtJQUN0QyxJQUFJLENBQUNDLE9BQU9FLE9BQU8sRUFBRTtRQUNuQixPQUFPckIscURBQVlBLENBQUNlLElBQUksQ0FDdEI7WUFBRU8sT0FBTztZQUFtQkMsU0FBU0osT0FBT0csS0FBSyxDQUFDRSxPQUFPO1FBQUcsR0FDNUQ7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0lBQ0EsSUFBSTtRQUNGLE1BQU1DLFVBQVV2QixpRUFBd0JBLENBQUNnQixPQUFPUSxJQUFJO1FBQ3BELE9BQU8zQixxREFBWUEsQ0FBQ2UsSUFBSSxDQUFDO1lBQUVhLE1BQU1GO1FBQVE7SUFDM0MsRUFBRSxPQUFPSixPQUFnQjtRQUN2QixPQUFPdEIscURBQVlBLENBQUNlLElBQUksQ0FDdEI7WUFDRU8sT0FBTztZQUNQQyxTQUNFRCxpQkFBaUJPLFFBQVFQLE1BQU1RLE9BQU8sR0FBRztRQUM3QyxHQUNBO1lBQUVMLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmVjdG9yLXRlc3Rlci8uL2FwcC9hcGkvaHVnZ2luZ2ZhY2UvbWV0YS9yb3V0ZS50cz83NDYxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7XG4gIGdldEh1Z2dpbmdmYWNlTWV0YVRhZ3MsXG4gIHVwZGF0ZUh1Z2dpbmdmYWNlTWV0YVRhZyxcbn0gZnJvbSBcIkAvbGliL2RiXCI7XG5cbmNvbnN0IHVwZGF0ZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgaWQ6IHoubnVtYmVyKCksXG4gIGFjdGl2ZTogei5ib29sZWFuKCkub3B0aW9uYWwoKSxcbiAgZGV0YWlsZWQ6IHouYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gIGV4dGVuc2l2ZTogei5ib29sZWFuKCkub3B0aW9uYWwoKSxcbn0pO1xuXG5leHBvcnQgZnVuY3Rpb24gR0VUKCkge1xuICBjb25zdCBtZXRhZGF0YSA9IGdldEh1Z2dpbmdmYWNlTWV0YVRhZ3MoKTtcbiAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWV0YWRhdGEgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQQVRDSChyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gIGNvbnN0IHBheWxvYWQgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgY29uc3QgcGFyc2VkID0gdXBkYXRlU2NoZW1hLnNhZmVQYXJzZShwYXlsb2FkKTtcbiAgaWYgKCFwYXJzZWQuc3VjY2Vzcykge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6IFwiSW52YWxpZCBwYXlsb2FkXCIsIGRldGFpbHM6IHBhcnNlZC5lcnJvci5mbGF0dGVuKCkgfSxcbiAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICk7XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCB1cGRhdGVkID0gdXBkYXRlSHVnZ2luZ2ZhY2VNZXRhVGFnKHBhcnNlZC5kYXRhKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXRhOiB1cGRhdGVkIH0pO1xuICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHtcbiAgICAgICAgZXJyb3I6IFwiRmFpbGVkIHRvIHVwZGF0ZSBtZXRhZGF0YSBlbnRyeVwiLFxuICAgICAgICBkZXRhaWxzOlxuICAgICAgICAgIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yIG9jY3VycmVkXCIsXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInoiLCJnZXRIdWdnaW5nZmFjZU1ldGFUYWdzIiwidXBkYXRlSHVnZ2luZ2ZhY2VNZXRhVGFnIiwidXBkYXRlU2NoZW1hIiwib2JqZWN0IiwiaWQiLCJudW1iZXIiLCJhY3RpdmUiLCJib29sZWFuIiwib3B0aW9uYWwiLCJkZXRhaWxlZCIsImV4dGVuc2l2ZSIsIkdFVCIsIm1ldGFkYXRhIiwianNvbiIsIlBBVENIIiwicmVxdWVzdCIsInBheWxvYWQiLCJwYXJzZWQiLCJzYWZlUGFyc2UiLCJzdWNjZXNzIiwiZXJyb3IiLCJkZXRhaWxzIiwiZmxhdHRlbiIsInN0YXR1cyIsInVwZGF0ZWQiLCJkYXRhIiwibWV0YSIsIkVycm9yIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/huggingface/meta/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   countTestSteps: () => (/* binding */ countTestSteps),\n/* harmony export */   db: () => (/* binding */ db),\n/* harmony export */   deleteHuggingfaceMetadataForModel: () => (/* binding */ deleteHuggingfaceMetadataForModel),\n/* harmony export */   deleteModelParameterValue: () => (/* binding */ deleteModelParameterValue),\n/* harmony export */   deleteServerEnvironment: () => (/* binding */ deleteServerEnvironment),\n/* harmony export */   deleteSwaggerEndpoint: () => (/* binding */ deleteSwaggerEndpoint),\n/* harmony export */   deleteTestProfile: () => (/* binding */ deleteTestProfile),\n/* harmony export */   deleteTestStep: () => (/* binding */ deleteTestStep),\n/* harmony export */   getHuggingfaceMetaById: () => (/* binding */ getHuggingfaceMetaById),\n/* harmony export */   getHuggingfaceMetaTags: () => (/* binding */ getHuggingfaceMetaTags),\n/* harmony export */   getHuggingfaceMetadataForModel: () => (/* binding */ getHuggingfaceMetadataForModel),\n/* harmony export */   getLogById: () => (/* binding */ getLogById),\n/* harmony export */   getModelParameterValueById: () => (/* binding */ getModelParameterValueById),\n/* harmony export */   getModelParameters: () => (/* binding */ getModelParameters),\n/* harmony export */   getParameterValuesForModel: () => (/* binding */ getParameterValuesForModel),\n/* harmony export */   getRecentLogs: () => (/* binding */ getRecentLogs),\n/* harmony export */   getRecentRuns: () => (/* binding */ getRecentRuns),\n/* harmony export */   getRunById: () => (/* binding */ getRunById),\n/* harmony export */   getServerEnvironments: () => (/* binding */ getServerEnvironments),\n/* harmony export */   getStepsForProfile: () => (/* binding */ getStepsForProfile),\n/* harmony export */   getSwaggerEndpoints: () => (/* binding */ getSwaggerEndpoints),\n/* harmony export */   getTestModelById: () => (/* binding */ getTestModelById),\n/* harmony export */   getTestModelByName: () => (/* binding */ getTestModelByName),\n/* harmony export */   getTestModels: () => (/* binding */ getTestModels),\n/* harmony export */   getTestProfileById: () => (/* binding */ getTestProfileById),\n/* harmony export */   getTestProfiles: () => (/* binding */ getTestProfiles),\n/* harmony export */   getTestStepById: () => (/* binding */ getTestStepById),\n/* harmony export */   insertLogEvent: () => (/* binding */ insertLogEvent),\n/* harmony export */   insertModelParameterValue: () => (/* binding */ insertModelParameterValue),\n/* harmony export */   insertOrUpdateTestModel: () => (/* binding */ insertOrUpdateTestModel),\n/* harmony export */   insertTestProfile: () => (/* binding */ insertTestProfile),\n/* harmony export */   insertTestRun: () => (/* binding */ insertTestRun),\n/* harmony export */   insertTestStep: () => (/* binding */ insertTestStep),\n/* harmony export */   updateHuggingfaceMetaTag: () => (/* binding */ updateHuggingfaceMetaTag),\n/* harmony export */   updateRunStatus: () => (/* binding */ updateRunStatus),\n/* harmony export */   updateServerEnvironment: () => (/* binding */ updateServerEnvironment),\n/* harmony export */   updateTestProfile: () => (/* binding */ updateTestProfile),\n/* harmony export */   updateTestStep: () => (/* binding */ updateTestStep),\n/* harmony export */   upsertModelParameter: () => (/* binding */ upsertModelParameter),\n/* harmony export */   upsertServerEnvironment: () => (/* binding */ upsertServerEnvironment),\n/* harmony export */   upsertSwaggerEndpoint: () => (/* binding */ upsertSwaggerEndpoint)\n/* harmony export */ });\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! better-sqlite3 */ \"better-sqlite3\");\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(better_sqlite3__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var node_fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:fs */ \"node:fs\");\n/* harmony import */ var node_fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(node_fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! node:path */ \"node:path\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(node_path__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst dbPath = process.env.LOG_DB_PATH || node_path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"data\", \"vector-tester.db\");\nnode_fs__WEBPACK_IMPORTED_MODULE_1___default().mkdirSync(node_path__WEBPACK_IMPORTED_MODULE_2___default().dirname(dbPath), {\n    recursive: true\n});\nconst db = new (better_sqlite3__WEBPACK_IMPORTED_MODULE_0___default())(dbPath);\ndb.pragma(\"journal_mode = WAL\");\ndb.exec(`\nCREATE TABLE IF NOT EXISTS test_runs (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  model_name TEXT NOT NULL,\n  scenario TEXT,\n  status TEXT NOT NULL DEFAULT 'pending',\n  started_at TEXT NOT NULL DEFAULT (datetime('now')),\n  completed_at TEXT,\n  load_duration_ms REAL,\n  notes TEXT\n);\n\nCREATE TABLE IF NOT EXISTS models_test (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  source_model_id INTEGER,\n  model_name TEXT NOT NULL UNIQUE,\n  hf_path TEXT,\n  cache_location TEXT,\n  compatibility_status TEXT,\n  metadata TEXT,\n  status TEXT NOT NULL DEFAULT 'staged',\n  notes TEXT,\n  cached_at TEXT NOT NULL DEFAULT (datetime('now'))\n);\n\nCREATE TABLE IF NOT EXISTS model_parameters (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  name TEXT NOT NULL UNIQUE,\n  description TEXT,\n  data_type TEXT NOT NULL,\n  created_at TEXT NOT NULL DEFAULT (datetime('now')),\n  updated_at TEXT,\n  unit TEXT,\n  default_value TEXT\n);\n\nCREATE TABLE IF NOT EXISTS model_parameter_values (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  model_test_id INTEGER NOT NULL,\n  parameter_id INTEGER NOT NULL,\n  value TEXT,\n  json_value TEXT,\n  notes TEXT,\n  recorded_at TEXT NOT NULL DEFAULT (datetime('now')),\n  FOREIGN KEY (model_test_id) REFERENCES models_test(id) ON DELETE CASCADE,\n  FOREIGN KEY (parameter_id) REFERENCES model_parameters(id) ON DELETE CASCADE\n);\n\nCREATE TABLE IF NOT EXISTS server_environments (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  name TEXT NOT NULL UNIQUE,\n  hostname TEXT,\n  ip_address TEXT,\n  gpu_model TEXT,\n  gpu_vram_gb REAL,\n  cpu_model TEXT,\n  os_version TEXT,\n  wsl_version TEXT,\n  rocm_version TEXT,\n  notes TEXT,\n  created_at TEXT NOT NULL DEFAULT (datetime('now'))\n);\n\nCREATE TABLE IF NOT EXISTS test_profiles (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  name TEXT NOT NULL UNIQUE,\n  description TEXT,\n  model_test_id INTEGER,\n  server_environment_id INTEGER,\n  default_prompt TEXT,\n  max_tokens INTEGER,\n  temperature REAL,\n  top_p REAL,\n  active INTEGER NOT NULL DEFAULT 1,\n  created_at TEXT NOT NULL DEFAULT (datetime('now')),\n  updated_at TEXT,\n  FOREIGN KEY (model_test_id) REFERENCES models_test(id) ON DELETE SET NULL,\n  FOREIGN KEY (server_environment_id) REFERENCES server_environments(id) ON DELETE SET NULL\n);\n\nCREATE TABLE IF NOT EXISTS test_steps (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  profile_id INTEGER NOT NULL,\n  step_order INTEGER NOT NULL,\n  step_name TEXT NOT NULL,\n  api_method TEXT NOT NULL,\n  api_path TEXT NOT NULL,\n  request_body TEXT,\n  expected_status INTEGER,\n  expected_contains TEXT,\n  pass_rule TEXT,\n  notes TEXT,\n  created_at TEXT NOT NULL DEFAULT (datetime('now')),\n  FOREIGN KEY (profile_id) REFERENCES test_profiles(id) ON DELETE CASCADE\n);\n\nCREATE TABLE IF NOT EXISTS log_events (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  run_id INTEGER,\n  model_id INTEGER,\n  test_profile_id INTEGER,\n  source TEXT NOT NULL,\n  level TEXT NOT NULL DEFAULT 'info',\n  message TEXT NOT NULL,\n  created_at TEXT NOT NULL DEFAULT (datetime('now')),\n  FOREIGN KEY (run_id) REFERENCES test_runs(id) ON DELETE CASCADE,\n  FOREIGN KEY (model_id) REFERENCES models_test(id) ON DELETE SET NULL,\n  FOREIGN KEY (test_profile_id) REFERENCES test_profiles(id) ON DELETE SET NULL\n);\n\nCREATE TABLE IF NOT EXISTS huggingface_meta (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  canonical_path TEXT NOT NULL UNIQUE,\n  display_path TEXT,\n  element_type TEXT NOT NULL,\n  description TEXT,\n  category TEXT,\n  semantic_role TEXT,\n  example_value TEXT,\n  active INTEGER NOT NULL DEFAULT 1,\n  detailed INTEGER NOT NULL DEFAULT 0,\n  extensive INTEGER NOT NULL DEFAULT 0,\n  parent_path TEXT,\n  updated_at TEXT NOT NULL DEFAULT (datetime('now'))\n);\n\nCREATE TABLE IF NOT EXISTS models_test_huggingface (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  model_test_id INTEGER NOT NULL,\n  meta_id INTEGER NOT NULL,\n  canonical_path TEXT NOT NULL,\n  display_path TEXT,\n  element_type TEXT NOT NULL,\n  value_text TEXT,\n  value_json TEXT,\n  model_card_path TEXT,\n  model_card_section TEXT,\n  source_line INTEGER,\n  detected_at TEXT NOT NULL DEFAULT (datetime('now')),\n  FOREIGN KEY (model_test_id) REFERENCES models_test(id) ON DELETE CASCADE,\n  FOREIGN KEY (meta_id) REFERENCES huggingface_meta(id) ON DELETE CASCADE\n);\n\nCREATE INDEX IF NOT EXISTS idx_models_test_hf_model\n  ON models_test_huggingface(model_test_id);\nCREATE INDEX IF NOT EXISTS idx_models_test_hf_meta\n  ON models_test_huggingface(meta_id);\n\nCREATE TABLE IF NOT EXISTS swagger_endpoints (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  method TEXT NOT NULL,\n  path TEXT NOT NULL,\n  summary TEXT,\n  description TEXT,\n  request_schema TEXT,\n  response_schema TEXT,\n  last_synced TEXT NOT NULL DEFAULT (datetime('now')),\n  UNIQUE(method, path)\n);\n`);\nfunction ensureColumn(table, column, definition) {\n    const columns = db.prepare(`PRAGMA table_info(${table})`).all();\n    if (!columns.some((col)=>col.name === column)) {\n        db.exec(`ALTER TABLE ${table} ADD COLUMN ${column} ${definition}`);\n    }\n}\nensureColumn(\"log_events\", \"model_id\", \"INTEGER REFERENCES models_test(id)\");\nensureColumn(\"log_events\", \"test_profile_id\", \"INTEGER REFERENCES test_profiles(id)\");\nfunction getRecentRuns(limit = 15) {\n    const stmt = db.prepare(`SELECT * FROM test_runs ORDER BY datetime(started_at) DESC LIMIT ?`);\n    return stmt.all(limit);\n}\nfunction insertTestRun(data) {\n    const stmt = db.prepare(`INSERT INTO test_runs (model_name, scenario, notes)\n     VALUES (@model_name, @scenario, @notes)`);\n    const info = stmt.run({\n        model_name: data.model_name,\n        scenario: data.scenario ?? null,\n        notes: data.notes ?? null\n    });\n    return getRunById(Number(info.lastInsertRowid));\n}\nfunction updateRunStatus(data) {\n    const stmt = db.prepare(`UPDATE test_runs\n     SET status = COALESCE(@status, status),\n         load_duration_ms = COALESCE(@load_duration_ms, load_duration_ms),\n         completed_at = CASE\n            WHEN @status IN ('failed','success') THEN datetime('now')\n            ELSE completed_at\n         END,\n         notes = COALESCE(@notes, notes)\n     WHERE id = @id`);\n    stmt.run({\n        id: data.id,\n        status: data.status,\n        load_duration_ms: data.load_duration_ms ?? null,\n        notes: data.notes\n    });\n    return getRunById(data.id);\n}\nfunction getRunById(id) {\n    const stmt = db.prepare(`SELECT * FROM test_runs WHERE id = ?`);\n    return stmt.get(id);\n}\nfunction insertLogEvent(data) {\n    const stmt = db.prepare(`INSERT INTO log_events (run_id, model_id, test_profile_id, source, level, message)\n     VALUES (@run_id, @model_id, @test_profile_id, @source, COALESCE(@level, 'info'), @message)`);\n    const info = stmt.run({\n        run_id: data.run_id ?? null,\n        model_id: data.model_id,\n        test_profile_id: data.test_profile_id ?? null,\n        source: data.source,\n        level: data.level ?? \"info\",\n        message: data.message\n    });\n    return getLogById(Number(info.lastInsertRowid));\n}\nfunction getLogById(id) {\n    const stmt = db.prepare(`SELECT * FROM log_events WHERE id = ?`);\n    return stmt.get(id);\n}\nfunction getRecentLogs(limit = 50) {\n    const stmt = db.prepare(`SELECT * FROM log_events ORDER BY datetime(created_at) DESC LIMIT ?`);\n    return stmt.all(limit);\n}\nfunction insertOrUpdateTestModel(data) {\n    const existing = getTestModelByName(data.model_name);\n    if (existing) {\n        const stmt = db.prepare(`UPDATE models_test\n       SET source_model_id = COALESCE(@source_model_id, source_model_id),\n           hf_path = COALESCE(@hf_path, hf_path),\n           cache_location = COALESCE(@cache_location, cache_location),\n           compatibility_status = COALESCE(@compatibility_status, compatibility_status),\n           metadata = COALESCE(@metadata, metadata),\n           status = COALESCE(@status, status),\n           notes = COALESCE(@notes, notes),\n           cached_at = datetime('now')\n       WHERE model_name = @model_name`);\n        stmt.run({\n            ...data,\n            source_model_id: data.source_model_id ?? null,\n            hf_path: data.hf_path ?? null,\n            cache_location: data.cache_location ?? null,\n            compatibility_status: data.compatibility_status ?? null,\n            metadata: data.metadata ?? null,\n            status: data.status ?? null,\n            notes: data.notes ?? null\n        });\n        return getTestModelByName(data.model_name);\n    }\n    const stmt = db.prepare(`INSERT INTO models_test\n      (source_model_id, model_name, hf_path, cache_location, compatibility_status, metadata, status, notes)\n     VALUES\n      (@source_model_id, @model_name, @hf_path, @cache_location, @compatibility_status, @metadata, COALESCE(@status, 'staged'), @notes)`);\n    const info = stmt.run({\n        source_model_id: data.source_model_id ?? null,\n        model_name: data.model_name,\n        hf_path: data.hf_path ?? null,\n        cache_location: data.cache_location ?? null,\n        compatibility_status: data.compatibility_status ?? null,\n        metadata: data.metadata ?? null,\n        status: data.status ?? \"staged\",\n        notes: data.notes ?? null\n    });\n    return getTestModelById(Number(info.lastInsertRowid));\n}\nfunction getTestModels() {\n    const stmt = db.prepare(`SELECT * FROM models_test ORDER BY datetime(cached_at) DESC`);\n    return stmt.all();\n}\nfunction getTestModelById(id) {\n    const stmt = db.prepare(`SELECT * FROM models_test WHERE id = ?`);\n    return stmt.get(id);\n}\nfunction getTestModelByName(model_name) {\n    const stmt = db.prepare(`SELECT * FROM models_test WHERE model_name = ?`);\n    const result = stmt.get(model_name);\n    return result || null;\n}\nfunction getHuggingfaceMetaTags() {\n    const stmt = db.prepare(`SELECT * FROM huggingface_meta ORDER BY canonical_path`);\n    return stmt.all();\n}\nfunction getHuggingfaceMetaById(id) {\n    const stmt = db.prepare(`SELECT * FROM huggingface_meta WHERE id = ?`);\n    return stmt.get(id) ?? null;\n}\nfunction updateHuggingfaceMetaTag(data) {\n    const updates = [];\n    const params = {\n        id: data.id\n    };\n    if (data.active !== undefined) {\n        updates.push(\"active = @active\");\n        params.active = data.active ? 1 : 0;\n    }\n    if (data.detailed !== undefined) {\n        updates.push(\"detailed = @detailed\");\n        params.detailed = data.detailed ? 1 : 0;\n    }\n    if (data.extensive !== undefined) {\n        updates.push(\"extensive = @extensive\");\n        params.extensive = data.extensive ? 1 : 0;\n    }\n    if (updates.length > 0) {\n        const stmt = db.prepare(`UPDATE huggingface_meta\n       SET ${updates.join(\", \")},\n           updated_at = datetime('now')\n       WHERE id = @id`);\n        stmt.run(params);\n    }\n    return getHuggingfaceMetaById(data.id);\n}\nfunction getHuggingfaceMetadataForModel(model_test_id) {\n    const stmt = db.prepare(`SELECT\n       mth.*,\n       hm.category,\n       hm.semantic_role,\n       hm.active,\n       hm.detailed,\n       hm.extensive\n     FROM models_test_huggingface AS mth\n     JOIN huggingface_meta AS hm ON hm.id = mth.meta_id\n     WHERE mth.model_test_id = ?\n     ORDER BY hm.canonical_path, mth.source_line`);\n    return stmt.all(model_test_id);\n}\nfunction deleteHuggingfaceMetadataForModel(model_test_id) {\n    const stmt = db.prepare(`DELETE FROM models_test_huggingface WHERE model_test_id = ?`);\n    stmt.run(model_test_id);\n}\nfunction upsertModelParameter(param) {\n    const stmt = db.prepare(`INSERT INTO model_parameters (name, description, data_type, unit, default_value)\n     VALUES (@name, @description, @data_type, @unit, @default_value)\n     ON CONFLICT(name) DO UPDATE SET\n       description = excluded.description,\n       data_type = excluded.data_type,\n       unit = excluded.unit,\n       default_value = excluded.default_value,\n       updated_at = datetime('now')`);\n    stmt.run({\n        name: param.name,\n        description: param.description ?? null,\n        data_type: param.data_type,\n        unit: param.unit ?? null,\n        default_value: param.default_value ?? null\n    });\n    const row = db.prepare(`SELECT * FROM model_parameters WHERE name = ?`).get(param.name);\n    return row;\n}\nfunction getModelParameters() {\n    const stmt = db.prepare(`SELECT * FROM model_parameters ORDER BY datetime(created_at) DESC`);\n    return stmt.all();\n}\nfunction insertModelParameterValue(data) {\n    const stmt = db.prepare(`INSERT INTO model_parameter_values\n      (model_test_id, parameter_id, value, json_value, notes)\n     VALUES\n      (@model_test_id, @parameter_id, @value, @json_value, @notes)`);\n    const info = stmt.run({\n        model_test_id: data.model_test_id,\n        parameter_id: data.parameter_id,\n        value: data.value ?? null,\n        json_value: data.json_value === undefined || data.json_value === null ? null : typeof data.json_value === \"string\" ? data.json_value : JSON.stringify(data.json_value),\n        notes: data.notes ?? null\n    });\n    return getModelParameterValueById(Number(info.lastInsertRowid));\n}\nfunction getModelParameterValueById(id) {\n    const stmt = db.prepare(`SELECT * FROM model_parameter_values WHERE id = ?`);\n    return stmt.get(id);\n}\nfunction getParameterValuesForModel(model_test_id) {\n    const stmt = db.prepare(`SELECT * FROM model_parameter_values\n     WHERE model_test_id = ?\n     ORDER BY datetime(recorded_at) DESC`);\n    return stmt.all(model_test_id);\n}\nfunction deleteModelParameterValue(id) {\n    db.prepare(`DELETE FROM model_parameter_values WHERE id = ?`).run(id);\n}\nfunction upsertServerEnvironment(env) {\n    const stmt = db.prepare(`INSERT INTO server_environments\n      (name, hostname, ip_address, gpu_model, gpu_vram_gb, cpu_model, os_version, wsl_version, rocm_version, notes)\n     VALUES\n      (@name, @hostname, @ip_address, @gpu_model, @gpu_vram_gb, @cpu_model, @os_version, @wsl_version, @rocm_version, @notes)\n     ON CONFLICT(name) DO UPDATE SET\n      hostname = excluded.hostname,\n      ip_address = excluded.ip_address,\n      gpu_model = excluded.gpu_model,\n      gpu_vram_gb = excluded.gpu_vram_gb,\n      cpu_model = excluded.cpu_model,\n      os_version = excluded.os_version,\n      wsl_version = excluded.wsl_version,\n      rocm_version = excluded.rocm_version,\n      notes = excluded.notes`);\n    stmt.run({\n        name: env.name,\n        hostname: env.hostname ?? null,\n        ip_address: env.ip_address ?? null,\n        gpu_model: env.gpu_model ?? null,\n        gpu_vram_gb: env.gpu_vram_gb ?? null,\n        cpu_model: env.cpu_model ?? null,\n        os_version: env.os_version ?? null,\n        wsl_version: env.wsl_version ?? null,\n        rocm_version: env.rocm_version ?? null,\n        notes: env.notes ?? null\n    });\n    const row = db.prepare(`SELECT * FROM server_environments WHERE name = ?`).get(env.name);\n    return row;\n}\nfunction getServerEnvironments() {\n    const stmt = db.prepare(`SELECT * FROM server_environments ORDER BY datetime(created_at) DESC`);\n    return stmt.all();\n}\nfunction insertTestProfile(profile) {\n    const stmt = db.prepare(`INSERT INTO test_profiles\n      (name, description, model_test_id, server_environment_id, default_prompt, max_tokens, temperature, top_p)\n     VALUES\n      (@name, @description, @model_test_id, @server_environment_id, @default_prompt, @max_tokens, @temperature, @top_p)`);\n    const info = stmt.run({\n        name: profile.name,\n        description: profile.description ?? null,\n        model_test_id: profile.model_test_id ?? null,\n        server_environment_id: profile.server_environment_id ?? null,\n        default_prompt: profile.default_prompt ?? null,\n        max_tokens: profile.max_tokens ?? null,\n        temperature: profile.temperature ?? null,\n        top_p: profile.top_p ?? null\n    });\n    return getTestProfileById(Number(info.lastInsertRowid));\n}\nfunction updateTestProfile(data) {\n    const stmt = db.prepare(`UPDATE test_profiles\n     SET name = COALESCE(@name, name),\n         description = COALESCE(@description, description),\n         model_test_id = COALESCE(@model_test_id, model_test_id),\n         server_environment_id = COALESCE(@server_environment_id, server_environment_id),\n         default_prompt = COALESCE(@default_prompt, default_prompt),\n         max_tokens = COALESCE(@max_tokens, max_tokens),\n         temperature = COALESCE(@temperature, temperature),\n         top_p = COALESCE(@top_p, top_p),\n         active = COALESCE(@active, active),\n         updated_at = datetime('now')\n     WHERE id = @id`);\n    stmt.run({\n        id: data.id,\n        name: data.name,\n        description: data.description ?? null,\n        model_test_id: data.model_test_id ?? null,\n        server_environment_id: data.server_environment_id ?? null,\n        default_prompt: data.default_prompt ?? null,\n        max_tokens: data.max_tokens ?? null,\n        temperature: data.temperature ?? null,\n        top_p: data.top_p ?? null,\n        active: data.active ?? null\n    });\n    return getTestProfileById(data.id);\n}\nfunction deleteTestProfile(id) {\n    db.prepare(`DELETE FROM test_profiles WHERE id = ?`).run(id);\n}\nfunction getTestProfiles(limit = 25) {\n    const stmt = db.prepare(`SELECT * FROM test_profiles ORDER BY datetime(created_at) DESC LIMIT ?`);\n    return stmt.all(limit);\n}\nfunction getTestProfileById(id) {\n    const stmt = db.prepare(`SELECT * FROM test_profiles WHERE id = ?`);\n    return stmt.get(id);\n}\nfunction insertTestStep(step) {\n    const stmt = db.prepare(`INSERT INTO test_steps\n      (profile_id, step_order, step_name, api_method, api_path, request_body, expected_status, expected_contains, pass_rule, notes)\n     VALUES\n      (@profile_id, @step_order, @step_name, @api_method, @api_path, @request_body, @expected_status, @expected_contains, @pass_rule, @notes)`);\n    const info = stmt.run({\n        profile_id: step.profile_id,\n        step_order: step.step_order,\n        step_name: step.step_name,\n        api_method: step.api_method,\n        api_path: step.api_path,\n        request_body: step.request_body ?? null,\n        expected_status: step.expected_status ?? null,\n        expected_contains: step.expected_contains ?? null,\n        pass_rule: step.pass_rule ?? null,\n        notes: step.notes ?? null\n    });\n    return getTestStepById(Number(info.lastInsertRowid));\n}\nfunction getStepsForProfile(profile_id) {\n    const stmt = db.prepare(`SELECT * FROM test_steps WHERE profile_id = ? ORDER BY step_order ASC`);\n    return stmt.all(profile_id);\n}\nfunction getTestStepById(id) {\n    const stmt = db.prepare(`SELECT * FROM test_steps WHERE id = ?`);\n    return stmt.get(id);\n}\nfunction updateTestStep(data) {\n    const stmt = db.prepare(`UPDATE test_steps\n     SET step_order = COALESCE(@step_order, step_order),\n         step_name = COALESCE(@step_name, step_name),\n         api_method = COALESCE(@api_method, api_method),\n         api_path = COALESCE(@api_path, api_path),\n         request_body = COALESCE(@request_body, request_body),\n         expected_status = COALESCE(@expected_status, expected_status),\n         expected_contains = COALESCE(@expected_contains, expected_contains),\n         pass_rule = COALESCE(@pass_rule, pass_rule),\n         notes = COALESCE(@notes, notes)\n     WHERE id = @id`);\n    stmt.run({\n        id: data.id,\n        step_order: data.step_order,\n        step_name: data.step_name,\n        api_method: data.api_method,\n        api_path: data.api_path,\n        request_body: data.request_body ?? null,\n        expected_status: data.expected_status ?? null,\n        expected_contains: data.expected_contains ?? null,\n        pass_rule: data.pass_rule ?? null,\n        notes: data.notes ?? null\n    });\n    return getTestStepById(data.id);\n}\nfunction deleteTestStep(id) {\n    db.prepare(`DELETE FROM test_steps WHERE id = ?`).run(id);\n}\nfunction upsertSwaggerEndpoint(data) {\n    const stmt = db.prepare(`INSERT INTO swagger_endpoints\n      (method, path, summary, description, request_schema, response_schema)\n     VALUES\n      (@method, @path, @summary, @description, @request_schema, @response_schema)\n     ON CONFLICT(method, path) DO UPDATE SET\n      summary = excluded.summary,\n      description = excluded.description,\n      request_schema = excluded.request_schema,\n      response_schema = excluded.response_schema,\n      last_synced = datetime('now')`);\n    stmt.run({\n        method: data.method.toUpperCase(),\n        path: data.path,\n        summary: data.summary ?? null,\n        description: data.description ?? null,\n        request_schema: data.request_schema ?? null,\n        response_schema: data.response_schema ?? null\n    });\n    const row = db.prepare(`SELECT * FROM swagger_endpoints WHERE method = ? AND path = ?`).get(data.method.toUpperCase(), data.path);\n    return row;\n}\nfunction getSwaggerEndpoints() {\n    const stmt = db.prepare(`SELECT * FROM swagger_endpoints ORDER BY path, method`);\n    return stmt.all();\n}\nfunction deleteSwaggerEndpoint(id) {\n    db.prepare(`DELETE FROM swagger_endpoints WHERE id = ?`).run(id);\n}\nfunction countTestSteps() {\n    const row = db.prepare(`SELECT COUNT(*) as count FROM test_steps`).get();\n    return row?.count ?? 0;\n}\n\nfunction updateServerEnvironment(data) {\n    const stmt = db.prepare(`UPDATE server_environments\n     SET name = COALESCE(@name, name),\n         hostname = COALESCE(@hostname, hostname),\n         ip_address = COALESCE(@ip_address, ip_address),\n         gpu_model = COALESCE(@gpu_model, gpu_model),\n         gpu_vram_gb = COALESCE(@gpu_vram_gb, gpu_vram_gb),\n         cpu_model = COALESCE(@cpu_model, cpu_model),\n         os_version = COALESCE(@os_version, os_version),\n         wsl_version = COALESCE(@wsl_version, wsl_version),\n         rocm_version = COALESCE(@rocm_version, rocm_version),\n         notes = COALESCE(@notes, notes)\n     WHERE id = @id`);\n    stmt.run({\n        id: data.id,\n        name: data.name,\n        hostname: data.hostname ?? null,\n        ip_address: data.ip_address ?? null,\n        gpu_model: data.gpu_model ?? null,\n        gpu_vram_gb: data.gpu_vram_gb ?? null,\n        cpu_model: data.cpu_model ?? null,\n        os_version: data.os_version ?? null,\n        wsl_version: data.wsl_version ?? null,\n        rocm_version: data.rocm_version ?? null,\n        notes: data.notes ?? null\n    });\n    const row = db.prepare(`SELECT * FROM server_environments WHERE id = ?`).get(data.id);\n    return row;\n}\nfunction deleteServerEnvironment(id) {\n    db.prepare(`DELETE FROM server_environments WHERE id = ?`).run(id);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0M7QUFDYjtBQUNJO0FBRTdCLE1BQU1HLFNBQ0pDLFFBQVFDLEdBQUcsQ0FBQ0MsV0FBVyxJQUN2QkoscURBQVMsQ0FBQ0UsUUFBUUksR0FBRyxJQUFJLFFBQVE7QUFFbkNQLHdEQUFZLENBQUNDLHdEQUFZLENBQUNDLFNBQVM7SUFBRVEsV0FBVztBQUFLO0FBRXJELE1BQU1DLEtBQUssSUFBSVosdURBQVFBLENBQUNHO0FBRXhCUyxHQUFHQyxNQUFNLENBQUM7QUFFVkQsR0FBR0UsSUFBSSxDQUFDLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQStKVCxDQUFDO0FBR0QsU0FBU0MsYUFBYUMsS0FBYSxFQUFFQyxNQUFjLEVBQUVDLFVBQWtCO0lBQ3JFLE1BQU1DLFVBQVVQLEdBQ2JRLE9BQU8sQ0FBQyxDQUFDLGtCQUFrQixFQUFFSixNQUFNLENBQUMsQ0FBQyxFQUNyQ0ssR0FBRztJQUNOLElBQUksQ0FBQ0YsUUFBUUcsSUFBSSxDQUFDLENBQUNDLE1BQVFBLElBQUlDLElBQUksS0FBS1AsU0FBUztRQUMvQ0wsR0FBR0UsSUFBSSxDQUFDLENBQUMsWUFBWSxFQUFFRSxNQUFNLFlBQVksRUFBRUMsT0FBTyxDQUFDLEVBQUVDLFdBQVcsQ0FBQztJQUNuRTtBQUNGO0FBRUFILGFBQ0UsY0FDQSxZQUNBO0FBRUZBLGFBQ0UsY0FDQSxtQkFDQTtBQTBKSyxTQUFTVSxjQUFjQyxRQUFRLEVBQUU7SUFDdEMsTUFBTUMsT0FBT2YsR0FBR1EsT0FBTyxDQUNyQixDQUFDLGtFQUFrRSxDQUFDO0lBRXRFLE9BQU9PLEtBQUtOLEdBQUcsQ0FBQ0s7QUFDbEI7QUFFTyxTQUFTRSxjQUFjQyxJQUk3QjtJQUNDLE1BQU1GLE9BQU9mLEdBQUdRLE9BQU8sQ0FDckIsQ0FBQzs0Q0FDdUMsQ0FBQztJQUUzQyxNQUFNVSxPQUFPSCxLQUFLSSxHQUFHLENBQUM7UUFDcEJDLFlBQVlILEtBQUtHLFVBQVU7UUFDM0JDLFVBQVVKLEtBQUtJLFFBQVEsSUFBSTtRQUMzQkMsT0FBT0wsS0FBS0ssS0FBSyxJQUFJO0lBQ3ZCO0lBQ0EsT0FBT0MsV0FBV0MsT0FBT04sS0FBS08sZUFBZTtBQUMvQztBQUVPLFNBQVNDLGdCQUFnQlQsSUFLL0I7SUFDQyxNQUFNRixPQUFPZixHQUFHUSxPQUFPLENBQ3JCLENBQUM7Ozs7Ozs7O21CQVFjLENBQUM7SUFFbEJPLEtBQUtJLEdBQUcsQ0FBQztRQUNQUSxJQUFJVixLQUFLVSxFQUFFO1FBQ1hDLFFBQVFYLEtBQUtXLE1BQU07UUFDbkJDLGtCQUFrQlosS0FBS1ksZ0JBQWdCLElBQUk7UUFDM0NQLE9BQU9MLEtBQUtLLEtBQUs7SUFDbkI7SUFDQSxPQUFPQyxXQUFXTixLQUFLVSxFQUFFO0FBQzNCO0FBRU8sU0FBU0osV0FBV0ksRUFBVTtJQUNuQyxNQUFNWixPQUFPZixHQUFHUSxPQUFPLENBQUMsQ0FBQyxvQ0FBb0MsQ0FBQztJQUM5RCxPQUFPTyxLQUFLZSxHQUFHLENBQUNIO0FBQ2xCO0FBRU8sU0FBU0ksZUFBZWQsSUFPOUI7SUFDQyxNQUFNRixPQUFPZixHQUFHUSxPQUFPLENBQ3JCLENBQUM7K0ZBQzBGLENBQUM7SUFFOUYsTUFBTVUsT0FBT0gsS0FBS0ksR0FBRyxDQUFDO1FBQ3BCYSxRQUFRZixLQUFLZSxNQUFNLElBQUk7UUFDdkJDLFVBQVVoQixLQUFLZ0IsUUFBUTtRQUN2QkMsaUJBQWlCakIsS0FBS2lCLGVBQWUsSUFBSTtRQUN6Q0MsUUFBUWxCLEtBQUtrQixNQUFNO1FBQ25CQyxPQUFPbkIsS0FBS21CLEtBQUssSUFBSTtRQUNyQkMsU0FBU3BCLEtBQUtvQixPQUFPO0lBQ3ZCO0lBQ0EsT0FBT0MsV0FBV2QsT0FBT04sS0FBS08sZUFBZTtBQUMvQztBQUVPLFNBQVNhLFdBQVdYLEVBQVU7SUFDbkMsTUFBTVosT0FBT2YsR0FBR1EsT0FBTyxDQUFDLENBQUMscUNBQXFDLENBQUM7SUFDL0QsT0FBT08sS0FBS2UsR0FBRyxDQUFDSDtBQUNsQjtBQUVPLFNBQVNZLGNBQWN6QixRQUFRLEVBQUU7SUFDdEMsTUFBTUMsT0FBT2YsR0FBR1EsT0FBTyxDQUNyQixDQUFDLG1FQUFtRSxDQUFDO0lBRXZFLE9BQU9PLEtBQUtOLEdBQUcsQ0FBQ0s7QUFDbEI7QUFFTyxTQUFTMEIsd0JBQXdCdkIsSUFTdkM7SUFDQyxNQUFNd0IsV0FBV0MsbUJBQW1CekIsS0FBS0csVUFBVTtJQUNuRCxJQUFJcUIsVUFBVTtRQUNaLE1BQU0xQixPQUFPZixHQUFHUSxPQUFPLENBQ3JCLENBQUM7Ozs7Ozs7OztxQ0FTOEIsQ0FBQztRQUVsQ08sS0FBS0ksR0FBRyxDQUFDO1lBQ1AsR0FBR0YsSUFBSTtZQUNQMEIsaUJBQWlCMUIsS0FBSzBCLGVBQWUsSUFBSTtZQUN6Q0MsU0FBUzNCLEtBQUsyQixPQUFPLElBQUk7WUFDekJDLGdCQUFnQjVCLEtBQUs0QixjQUFjLElBQUk7WUFDdkNDLHNCQUFzQjdCLEtBQUs2QixvQkFBb0IsSUFBSTtZQUNuREMsVUFBVTlCLEtBQUs4QixRQUFRLElBQUk7WUFDM0JuQixRQUFRWCxLQUFLVyxNQUFNLElBQUk7WUFDdkJOLE9BQU9MLEtBQUtLLEtBQUssSUFBSTtRQUN2QjtRQUNBLE9BQU9vQixtQkFBbUJ6QixLQUFLRyxVQUFVO0lBQzNDO0lBRUEsTUFBTUwsT0FBT2YsR0FBR1EsT0FBTyxDQUNyQixDQUFDOzs7dUlBR2tJLENBQUM7SUFFdEksTUFBTVUsT0FBT0gsS0FBS0ksR0FBRyxDQUFDO1FBQ3BCd0IsaUJBQWlCMUIsS0FBSzBCLGVBQWUsSUFBSTtRQUN6Q3ZCLFlBQVlILEtBQUtHLFVBQVU7UUFDM0J3QixTQUFTM0IsS0FBSzJCLE9BQU8sSUFBSTtRQUN6QkMsZ0JBQWdCNUIsS0FBSzRCLGNBQWMsSUFBSTtRQUN2Q0Msc0JBQXNCN0IsS0FBSzZCLG9CQUFvQixJQUFJO1FBQ25EQyxVQUFVOUIsS0FBSzhCLFFBQVEsSUFBSTtRQUMzQm5CLFFBQVFYLEtBQUtXLE1BQU0sSUFBSTtRQUN2Qk4sT0FBT0wsS0FBS0ssS0FBSyxJQUFJO0lBQ3ZCO0lBQ0EsT0FBTzBCLGlCQUFpQnhCLE9BQU9OLEtBQUtPLGVBQWU7QUFDckQ7QUFFTyxTQUFTd0I7SUFDZCxNQUFNbEMsT0FBT2YsR0FBR1EsT0FBTyxDQUNyQixDQUFDLDJEQUEyRCxDQUFDO0lBRS9ELE9BQU9PLEtBQUtOLEdBQUc7QUFDakI7QUFFTyxTQUFTdUMsaUJBQWlCckIsRUFBVTtJQUN6QyxNQUFNWixPQUFPZixHQUFHUSxPQUFPLENBQUMsQ0FBQyxzQ0FBc0MsQ0FBQztJQUNoRSxPQUFPTyxLQUFLZSxHQUFHLENBQUNIO0FBQ2xCO0FBRU8sU0FBU2UsbUJBQW1CdEIsVUFBa0I7SUFDbkQsTUFBTUwsT0FBT2YsR0FBR1EsT0FBTyxDQUFDLENBQUMsOENBQThDLENBQUM7SUFDeEUsTUFBTTBDLFNBQVNuQyxLQUFLZSxHQUFHLENBQUNWO0lBQ3hCLE9BQU8sVUFBNkI7QUFDdEM7QUFFTyxTQUFTK0I7SUFDZCxNQUFNcEMsT0FBT2YsR0FBR1EsT0FBTyxDQUNyQixDQUFDLHNEQUFzRCxDQUFDO0lBRTFELE9BQU9PLEtBQUtOLEdBQUc7QUFDakI7QUFFTyxTQUFTMkMsdUJBQXVCekIsRUFBVTtJQUMvQyxNQUFNWixPQUFPZixHQUFHUSxPQUFPLENBQUMsQ0FBQywyQ0FBMkMsQ0FBQztJQUNyRSxPQUFPLEtBQU1zQixHQUFHLENBQUNILE9BQTJCO0FBQzlDO0FBRU8sU0FBUzBCLHlCQUF5QnBDLElBS3hDO0lBQ0MsTUFBTXFDLFVBQW9CLEVBQUU7SUFDNUIsTUFBTUMsU0FBa0M7UUFBRTVCLElBQUlWLEtBQUtVLEVBQUU7SUFBQztJQUN0RCxJQUFJVixLQUFLdUMsTUFBTSxLQUFLQyxXQUFXO1FBQzdCSCxRQUFRSSxJQUFJLENBQUM7UUFDYkgsT0FBT0MsTUFBTSxHQUFHdkMsS0FBS3VDLE1BQU0sR0FBRyxJQUFJO0lBQ3BDO0lBQ0EsSUFBSXZDLEtBQUswQyxRQUFRLEtBQUtGLFdBQVc7UUFDL0JILFFBQVFJLElBQUksQ0FBQztRQUNiSCxPQUFPSSxRQUFRLEdBQUcxQyxLQUFLMEMsUUFBUSxHQUFHLElBQUk7SUFDeEM7SUFDQSxJQUFJMUMsS0FBSzJDLFNBQVMsS0FBS0gsV0FBVztRQUNoQ0gsUUFBUUksSUFBSSxDQUFDO1FBQ2JILE9BQU9LLFNBQVMsR0FBRzNDLEtBQUsyQyxTQUFTLEdBQUcsSUFBSTtJQUMxQztJQUNBLElBQUlOLFFBQVFPLE1BQU0sR0FBRyxHQUFHO1FBQ3RCLE1BQU05QyxPQUFPZixHQUFHUSxPQUFPLENBQ3JCLENBQUM7V0FDSSxFQUFFOEMsUUFBUTNELElBQUksQ0FBQyxNQUFNOztxQkFFWCxDQUFDO1FBRWxCb0IsS0FBS0ksR0FBRyxDQUFDb0M7SUFDWDtJQUNBLE9BQU9ILHVCQUF1Qm5DLEtBQUtVLEVBQUU7QUFDdkM7QUFFTyxTQUFTbUMsK0JBQ2RDLGFBQXFCO0lBRXJCLE1BQU1oRCxPQUFPZixHQUFHUSxPQUFPLENBQ3JCLENBQUM7Ozs7Ozs7Ozs7Z0RBVTJDLENBQUM7SUFFL0MsT0FBT08sS0FBS04sR0FBRyxDQUFDc0Q7QUFDbEI7QUFFTyxTQUFTQyxrQ0FBa0NELGFBQXFCO0lBQ3JFLE1BQU1oRCxPQUFPZixHQUFHUSxPQUFPLENBQ3JCLENBQUMsMkRBQTJELENBQUM7SUFFL0RPLEtBQUtJLEdBQUcsQ0FBQzRDO0FBQ1g7QUFFTyxTQUFTRSxxQkFBcUJDLEtBTXBDO0lBQ0MsTUFBTW5ELE9BQU9mLEdBQUdRLE9BQU8sQ0FDckIsQ0FBQzs7Ozs7OzttQ0FPOEIsQ0FBQztJQUVsQ08sS0FBS0ksR0FBRyxDQUFDO1FBQ1BQLE1BQU1zRCxNQUFNdEQsSUFBSTtRQUNoQnVELGFBQWFELE1BQU1DLFdBQVcsSUFBSTtRQUNsQ0MsV0FBV0YsTUFBTUUsU0FBUztRQUMxQkMsTUFBTUgsTUFBTUcsSUFBSSxJQUFJO1FBQ3BCQyxlQUFlSixNQUFNSSxhQUFhLElBQUk7SUFDeEM7SUFDQSxNQUFNQyxNQUFNdkUsR0FDVFEsT0FBTyxDQUFDLENBQUMsNkNBQTZDLENBQUMsRUFDdkRzQixHQUFHLENBQUNvQyxNQUFNdEQsSUFBSTtJQUNqQixPQUFPMkQ7QUFDVDtBQUVPLFNBQVNDO0lBQ2QsTUFBTXpELE9BQU9mLEdBQUdRLE9BQU8sQ0FDckIsQ0FBQyxpRUFBaUUsQ0FBQztJQUVyRSxPQUFPTyxLQUFLTixHQUFHO0FBQ2pCO0FBRU8sU0FBU2dFLDBCQUEwQnhELElBTXpDO0lBQ0MsTUFBTUYsT0FBT2YsR0FBR1EsT0FBTyxDQUNyQixDQUFDOzs7a0VBRzZELENBQUM7SUFFakUsTUFBTVUsT0FBT0gsS0FBS0ksR0FBRyxDQUFDO1FBQ3BCNEMsZUFBZTlDLEtBQUs4QyxhQUFhO1FBQ2pDVyxjQUFjekQsS0FBS3lELFlBQVk7UUFDL0JDLE9BQU8xRCxLQUFLMEQsS0FBSyxJQUFJO1FBQ3JCQyxZQUNFM0QsS0FBSzJELFVBQVUsS0FBS25CLGFBQWF4QyxLQUFLMkQsVUFBVSxLQUFLLE9BQ2pELE9BQ0EsT0FBTzNELEtBQUsyRCxVQUFVLEtBQUssV0FDM0IzRCxLQUFLMkQsVUFBVSxHQUNmQyxLQUFLQyxTQUFTLENBQUM3RCxLQUFLMkQsVUFBVTtRQUNwQ3RELE9BQU9MLEtBQUtLLEtBQUssSUFBSTtJQUN2QjtJQUNBLE9BQU95RCwyQkFBMkJ2RCxPQUFPTixLQUFLTyxlQUFlO0FBQy9EO0FBRU8sU0FBU3NELDJCQUNkcEQsRUFBVTtJQUVWLE1BQU1aLE9BQU9mLEdBQUdRLE9BQU8sQ0FDckIsQ0FBQyxpREFBaUQsQ0FBQztJQUVyRCxPQUFPTyxLQUFLZSxHQUFHLENBQUNIO0FBQ2xCO0FBRU8sU0FBU3FELDJCQUNkakIsYUFBcUI7SUFFckIsTUFBTWhELE9BQU9mLEdBQUdRLE9BQU8sQ0FDckIsQ0FBQzs7d0NBRW1DLENBQUM7SUFFdkMsT0FBT08sS0FBS04sR0FBRyxDQUFDc0Q7QUFDbEI7QUFFTyxTQUFTa0IsMEJBQTBCdEQsRUFBVTtJQUNsRDNCLEdBQUdRLE9BQU8sQ0FBQyxDQUFDLCtDQUErQyxDQUFDLEVBQUVXLEdBQUcsQ0FBQ1E7QUFDcEU7QUFFTyxTQUFTdUQsd0JBQXdCekYsR0FXdkM7SUFDQyxNQUFNc0IsT0FBT2YsR0FBR1EsT0FBTyxDQUNyQixDQUFDOzs7Ozs7Ozs7Ozs7OzRCQWF1QixDQUFDO0lBRTNCTyxLQUFLSSxHQUFHLENBQUM7UUFDUFAsTUFBTW5CLElBQUltQixJQUFJO1FBQ2R1RSxVQUFVMUYsSUFBSTBGLFFBQVEsSUFBSTtRQUMxQkMsWUFBWTNGLElBQUkyRixVQUFVLElBQUk7UUFDOUJDLFdBQVc1RixJQUFJNEYsU0FBUyxJQUFJO1FBQzVCQyxhQUFhN0YsSUFBSTZGLFdBQVcsSUFBSTtRQUNoQ0MsV0FBVzlGLElBQUk4RixTQUFTLElBQUk7UUFDNUJDLFlBQVkvRixJQUFJK0YsVUFBVSxJQUFJO1FBQzlCQyxhQUFhaEcsSUFBSWdHLFdBQVcsSUFBSTtRQUNoQ0MsY0FBY2pHLElBQUlpRyxZQUFZLElBQUk7UUFDbENwRSxPQUFPN0IsSUFBSTZCLEtBQUssSUFBSTtJQUN0QjtJQUNBLE1BQU1pRCxNQUFNdkUsR0FDVFEsT0FBTyxDQUFDLENBQUMsZ0RBQWdELENBQUMsRUFDMURzQixHQUFHLENBQUNyQyxJQUFJbUIsSUFBSTtJQUNmLE9BQU8yRDtBQUNUO0FBRU8sU0FBU29CO0lBQ2QsTUFBTTVFLE9BQU9mLEdBQUdRLE9BQU8sQ0FDckIsQ0FBQyxvRUFBb0UsQ0FBQztJQUV4RSxPQUFPTyxLQUFLTixHQUFHO0FBQ2pCO0FBRU8sU0FBU21GLGtCQUFrQkMsT0FTakM7SUFDQyxNQUFNOUUsT0FBT2YsR0FBR1EsT0FBTyxDQUNyQixDQUFDOzs7dUhBR2tILENBQUM7SUFFdEgsTUFBTVUsT0FBT0gsS0FBS0ksR0FBRyxDQUFDO1FBQ3BCUCxNQUFNaUYsUUFBUWpGLElBQUk7UUFDbEJ1RCxhQUFhMEIsUUFBUTFCLFdBQVcsSUFBSTtRQUNwQ0osZUFBZThCLFFBQVE5QixhQUFhLElBQUk7UUFDeEMrQix1QkFBdUJELFFBQVFDLHFCQUFxQixJQUFJO1FBQ3hEQyxnQkFBZ0JGLFFBQVFFLGNBQWMsSUFBSTtRQUMxQ0MsWUFBWUgsUUFBUUcsVUFBVSxJQUFJO1FBQ2xDQyxhQUFhSixRQUFRSSxXQUFXLElBQUk7UUFDcENDLE9BQU9MLFFBQVFLLEtBQUssSUFBSTtJQUMxQjtJQUNBLE9BQU9DLG1CQUFtQjNFLE9BQU9OLEtBQUtPLGVBQWU7QUFDdkQ7QUFFTyxTQUFTMkUsa0JBQWtCbkYsSUFXakM7SUFDQyxNQUFNRixPQUFPZixHQUFHUSxPQUFPLENBQ3JCLENBQUM7Ozs7Ozs7Ozs7O21CQVdjLENBQUM7SUFFbEJPLEtBQUtJLEdBQUcsQ0FBQztRQUNQUSxJQUFJVixLQUFLVSxFQUFFO1FBQ1hmLE1BQU1LLEtBQUtMLElBQUk7UUFDZnVELGFBQWFsRCxLQUFLa0QsV0FBVyxJQUFJO1FBQ2pDSixlQUFlOUMsS0FBSzhDLGFBQWEsSUFBSTtRQUNyQytCLHVCQUF1QjdFLEtBQUs2RSxxQkFBcUIsSUFBSTtRQUNyREMsZ0JBQWdCOUUsS0FBSzhFLGNBQWMsSUFBSTtRQUN2Q0MsWUFBWS9FLEtBQUsrRSxVQUFVLElBQUk7UUFDL0JDLGFBQWFoRixLQUFLZ0YsV0FBVyxJQUFJO1FBQ2pDQyxPQUFPakYsS0FBS2lGLEtBQUssSUFBSTtRQUNyQjFDLFFBQVF2QyxLQUFLdUMsTUFBTSxJQUFJO0lBQ3pCO0lBQ0EsT0FBTzJDLG1CQUFtQmxGLEtBQUtVLEVBQUU7QUFDbkM7QUFFTyxTQUFTMEUsa0JBQWtCMUUsRUFBVTtJQUMxQzNCLEdBQUdRLE9BQU8sQ0FBQyxDQUFDLHNDQUFzQyxDQUFDLEVBQUVXLEdBQUcsQ0FBQ1E7QUFDM0Q7QUFFTyxTQUFTMkUsZ0JBQWdCeEYsUUFBUSxFQUFFO0lBQ3hDLE1BQU1DLE9BQU9mLEdBQUdRLE9BQU8sQ0FDckIsQ0FBQyxzRUFBc0UsQ0FBQztJQUUxRSxPQUFPTyxLQUFLTixHQUFHLENBQUNLO0FBQ2xCO0FBRU8sU0FBU3FGLG1CQUFtQnhFLEVBQVU7SUFDM0MsTUFBTVosT0FBT2YsR0FBR1EsT0FBTyxDQUFDLENBQUMsd0NBQXdDLENBQUM7SUFDbEUsT0FBT08sS0FBS2UsR0FBRyxDQUFDSDtBQUNsQjtBQUVPLFNBQVM0RSxlQUFlQyxJQVc5QjtJQUNDLE1BQU16RixPQUFPZixHQUFHUSxPQUFPLENBQ3JCLENBQUM7Ozs2SUFHd0ksQ0FBQztJQUU1SSxNQUFNVSxPQUFPSCxLQUFLSSxHQUFHLENBQUM7UUFDcEJzRixZQUFZRCxLQUFLQyxVQUFVO1FBQzNCQyxZQUFZRixLQUFLRSxVQUFVO1FBQzNCQyxXQUFXSCxLQUFLRyxTQUFTO1FBQ3pCQyxZQUFZSixLQUFLSSxVQUFVO1FBQzNCQyxVQUFVTCxLQUFLSyxRQUFRO1FBQ3ZCQyxjQUFjTixLQUFLTSxZQUFZLElBQUk7UUFDbkNDLGlCQUFpQlAsS0FBS08sZUFBZSxJQUFJO1FBQ3pDQyxtQkFBbUJSLEtBQUtRLGlCQUFpQixJQUFJO1FBQzdDQyxXQUFXVCxLQUFLUyxTQUFTLElBQUk7UUFDN0IzRixPQUFPa0YsS0FBS2xGLEtBQUssSUFBSTtJQUN2QjtJQUNBLE9BQU80RixnQkFBZ0IxRixPQUFPTixLQUFLTyxlQUFlO0FBQ3BEO0FBRU8sU0FBUzBGLG1CQUFtQlYsVUFBa0I7SUFDbkQsTUFBTTFGLE9BQU9mLEdBQUdRLE9BQU8sQ0FDckIsQ0FBQyxxRUFBcUUsQ0FBQztJQUV6RSxPQUFPTyxLQUFLTixHQUFHLENBQUNnRztBQUNsQjtBQUVPLFNBQVNTLGdCQUFnQnZGLEVBQVU7SUFDeEMsTUFBTVosT0FBT2YsR0FBR1EsT0FBTyxDQUFDLENBQUMscUNBQXFDLENBQUM7SUFDL0QsT0FBT08sS0FBS2UsR0FBRyxDQUFDSDtBQUNsQjtBQUVPLFNBQVN5RixlQUFlbkcsSUFXOUI7SUFDQyxNQUFNRixPQUFPZixHQUFHUSxPQUFPLENBQ3JCLENBQUM7Ozs7Ozs7Ozs7bUJBVWMsQ0FBQztJQUVsQk8sS0FBS0ksR0FBRyxDQUFDO1FBQ1BRLElBQUlWLEtBQUtVLEVBQUU7UUFDWCtFLFlBQVl6RixLQUFLeUYsVUFBVTtRQUMzQkMsV0FBVzFGLEtBQUswRixTQUFTO1FBQ3pCQyxZQUFZM0YsS0FBSzJGLFVBQVU7UUFDM0JDLFVBQVU1RixLQUFLNEYsUUFBUTtRQUN2QkMsY0FBYzdGLEtBQUs2RixZQUFZLElBQUk7UUFDbkNDLGlCQUFpQjlGLEtBQUs4RixlQUFlLElBQUk7UUFDekNDLG1CQUFtQi9GLEtBQUsrRixpQkFBaUIsSUFBSTtRQUM3Q0MsV0FBV2hHLEtBQUtnRyxTQUFTLElBQUk7UUFDN0IzRixPQUFPTCxLQUFLSyxLQUFLLElBQUk7SUFDdkI7SUFDQSxPQUFPNEYsZ0JBQWdCakcsS0FBS1UsRUFBRTtBQUNoQztBQUVPLFNBQVMwRixlQUFlMUYsRUFBVTtJQUN2QzNCLEdBQUdRLE9BQU8sQ0FBQyxDQUFDLG1DQUFtQyxDQUFDLEVBQUVXLEdBQUcsQ0FBQ1E7QUFDeEQ7QUFFTyxTQUFTMkYsc0JBQXNCckcsSUFPckM7SUFDQyxNQUFNRixPQUFPZixHQUFHUSxPQUFPLENBQ3JCLENBQUM7Ozs7Ozs7OzttQ0FTOEIsQ0FBQztJQUVsQ08sS0FBS0ksR0FBRyxDQUFDO1FBQ1BvRyxRQUFRdEcsS0FBS3NHLE1BQU0sQ0FBQ0MsV0FBVztRQUMvQmxJLE1BQU0yQixLQUFLM0IsSUFBSTtRQUNmbUksU0FBU3hHLEtBQUt3RyxPQUFPLElBQUk7UUFDekJ0RCxhQUFhbEQsS0FBS2tELFdBQVcsSUFBSTtRQUNqQ3VELGdCQUFnQnpHLEtBQUt5RyxjQUFjLElBQUk7UUFDdkNDLGlCQUFpQjFHLEtBQUswRyxlQUFlLElBQUk7SUFDM0M7SUFDQSxNQUFNcEQsTUFBTXZFLEdBQ1RRLE9BQU8sQ0FDTixDQUFDLDZEQUE2RCxDQUFDLEVBRWhFc0IsR0FBRyxDQUFDYixLQUFLc0csTUFBTSxDQUFDQyxXQUFXLElBQUl2RyxLQUFLM0IsSUFBSTtJQUMzQyxPQUFPaUY7QUFDVDtBQUVPLFNBQVNxRDtJQUNkLE1BQU03RyxPQUFPZixHQUFHUSxPQUFPLENBQ3JCLENBQUMscURBQXFELENBQUM7SUFFekQsT0FBT08sS0FBS04sR0FBRztBQUNqQjtBQUVPLFNBQVNvSCxzQkFBc0JsRyxFQUFVO0lBQzlDM0IsR0FBR1EsT0FBTyxDQUFDLENBQUMsMENBQTBDLENBQUMsRUFBRVcsR0FBRyxDQUFDUTtBQUMvRDtBQUVPLFNBQVNtRztJQUNkLE1BQU12RCxNQUFNdkUsR0FDVFEsT0FBTyxDQUFDLENBQUMsd0NBQXdDLENBQUMsRUFDbERzQixHQUFHO0lBQ04sT0FBT3lDLEtBQUt3RCxTQUFTO0FBQ3ZCO0FBRWM7QUFDUCxTQUFTQyx3QkFBd0IvRyxJQVl2QztJQUNDLE1BQU1GLE9BQU9mLEdBQUdRLE9BQU8sQ0FDckIsQ0FBQzs7Ozs7Ozs7Ozs7bUJBV2MsQ0FBQztJQUVsQk8sS0FBS0ksR0FBRyxDQUFDO1FBQ1BRLElBQUlWLEtBQUtVLEVBQUU7UUFDWGYsTUFBTUssS0FBS0wsSUFBSTtRQUNmdUUsVUFBVWxFLEtBQUtrRSxRQUFRLElBQUk7UUFDM0JDLFlBQVluRSxLQUFLbUUsVUFBVSxJQUFJO1FBQy9CQyxXQUFXcEUsS0FBS29FLFNBQVMsSUFBSTtRQUM3QkMsYUFBYXJFLEtBQUtxRSxXQUFXLElBQUk7UUFDakNDLFdBQVd0RSxLQUFLc0UsU0FBUyxJQUFJO1FBQzdCQyxZQUFZdkUsS0FBS3VFLFVBQVUsSUFBSTtRQUMvQkMsYUFBYXhFLEtBQUt3RSxXQUFXLElBQUk7UUFDakNDLGNBQWN6RSxLQUFLeUUsWUFBWSxJQUFJO1FBQ25DcEUsT0FBT0wsS0FBS0ssS0FBSyxJQUFJO0lBQ3ZCO0lBQ0EsTUFBTWlELE1BQU12RSxHQUNUUSxPQUFPLENBQUMsQ0FBQyw4Q0FBOEMsQ0FBQyxFQUN4RHNCLEdBQUcsQ0FBQ2IsS0FBS1UsRUFBRTtJQUNkLE9BQU80QztBQUNUO0FBRU8sU0FBUzBELHdCQUF3QnRHLEVBQVU7SUFDaEQzQixHQUFHUSxPQUFPLENBQUMsQ0FBQyw0Q0FBNEMsQ0FBQyxFQUFFVyxHQUFHLENBQUNRO0FBQ2pFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmVjdG9yLXRlc3Rlci8uL2xpYi9kYi50cz8xZGYwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBEYXRhYmFzZSBmcm9tIFwiYmV0dGVyLXNxbGl0ZTNcIjtcbmltcG9ydCBmcyBmcm9tIFwibm9kZTpmc1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcIm5vZGU6cGF0aFwiO1xuXG5jb25zdCBkYlBhdGggPVxuICBwcm9jZXNzLmVudi5MT0dfREJfUEFUSCB8fFxuICBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgXCJkYXRhXCIsIFwidmVjdG9yLXRlc3Rlci5kYlwiKTtcblxuZnMubWtkaXJTeW5jKHBhdGguZGlybmFtZShkYlBhdGgpLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcblxuY29uc3QgZGIgPSBuZXcgRGF0YWJhc2UoZGJQYXRoKTtcblxuZGIucHJhZ21hKFwiam91cm5hbF9tb2RlID0gV0FMXCIpO1xuXG5kYi5leGVjKGBcbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHRlc3RfcnVucyAoXG4gIGlkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcbiAgbW9kZWxfbmFtZSBURVhUIE5PVCBOVUxMLFxuICBzY2VuYXJpbyBURVhULFxuICBzdGF0dXMgVEVYVCBOT1QgTlVMTCBERUZBVUxUICdwZW5kaW5nJyxcbiAgc3RhcnRlZF9hdCBURVhUIE5PVCBOVUxMIERFRkFVTFQgKGRhdGV0aW1lKCdub3cnKSksXG4gIGNvbXBsZXRlZF9hdCBURVhULFxuICBsb2FkX2R1cmF0aW9uX21zIFJFQUwsXG4gIG5vdGVzIFRFWFRcbik7XG5cbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG1vZGVsc190ZXN0IChcbiAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxuICBzb3VyY2VfbW9kZWxfaWQgSU5URUdFUixcbiAgbW9kZWxfbmFtZSBURVhUIE5PVCBOVUxMIFVOSVFVRSxcbiAgaGZfcGF0aCBURVhULFxuICBjYWNoZV9sb2NhdGlvbiBURVhULFxuICBjb21wYXRpYmlsaXR5X3N0YXR1cyBURVhULFxuICBtZXRhZGF0YSBURVhULFxuICBzdGF0dXMgVEVYVCBOT1QgTlVMTCBERUZBVUxUICdzdGFnZWQnLFxuICBub3RlcyBURVhULFxuICBjYWNoZWRfYXQgVEVYVCBOT1QgTlVMTCBERUZBVUxUIChkYXRldGltZSgnbm93JykpXG4pO1xuXG5DUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBtb2RlbF9wYXJhbWV0ZXJzIChcbiAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxuICBuYW1lIFRFWFQgTk9UIE5VTEwgVU5JUVVFLFxuICBkZXNjcmlwdGlvbiBURVhULFxuICBkYXRhX3R5cGUgVEVYVCBOT1QgTlVMTCxcbiAgY3JlYXRlZF9hdCBURVhUIE5PVCBOVUxMIERFRkFVTFQgKGRhdGV0aW1lKCdub3cnKSksXG4gIHVwZGF0ZWRfYXQgVEVYVCxcbiAgdW5pdCBURVhULFxuICBkZWZhdWx0X3ZhbHVlIFRFWFRcbik7XG5cbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG1vZGVsX3BhcmFtZXRlcl92YWx1ZXMgKFxuICBpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXG4gIG1vZGVsX3Rlc3RfaWQgSU5URUdFUiBOT1QgTlVMTCxcbiAgcGFyYW1ldGVyX2lkIElOVEVHRVIgTk9UIE5VTEwsXG4gIHZhbHVlIFRFWFQsXG4gIGpzb25fdmFsdWUgVEVYVCxcbiAgbm90ZXMgVEVYVCxcbiAgcmVjb3JkZWRfYXQgVEVYVCBOT1QgTlVMTCBERUZBVUxUIChkYXRldGltZSgnbm93JykpLFxuICBGT1JFSUdOIEtFWSAobW9kZWxfdGVzdF9pZCkgUkVGRVJFTkNFUyBtb2RlbHNfdGVzdChpZCkgT04gREVMRVRFIENBU0NBREUsXG4gIEZPUkVJR04gS0VZIChwYXJhbWV0ZXJfaWQpIFJFRkVSRU5DRVMgbW9kZWxfcGFyYW1ldGVycyhpZCkgT04gREVMRVRFIENBU0NBREVcbik7XG5cbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHNlcnZlcl9lbnZpcm9ubWVudHMgKFxuICBpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXG4gIG5hbWUgVEVYVCBOT1QgTlVMTCBVTklRVUUsXG4gIGhvc3RuYW1lIFRFWFQsXG4gIGlwX2FkZHJlc3MgVEVYVCxcbiAgZ3B1X21vZGVsIFRFWFQsXG4gIGdwdV92cmFtX2diIFJFQUwsXG4gIGNwdV9tb2RlbCBURVhULFxuICBvc192ZXJzaW9uIFRFWFQsXG4gIHdzbF92ZXJzaW9uIFRFWFQsXG4gIHJvY21fdmVyc2lvbiBURVhULFxuICBub3RlcyBURVhULFxuICBjcmVhdGVkX2F0IFRFWFQgTk9UIE5VTEwgREVGQVVMVCAoZGF0ZXRpbWUoJ25vdycpKVxuKTtcblxuQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgdGVzdF9wcm9maWxlcyAoXG4gIGlkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcbiAgbmFtZSBURVhUIE5PVCBOVUxMIFVOSVFVRSxcbiAgZGVzY3JpcHRpb24gVEVYVCxcbiAgbW9kZWxfdGVzdF9pZCBJTlRFR0VSLFxuICBzZXJ2ZXJfZW52aXJvbm1lbnRfaWQgSU5URUdFUixcbiAgZGVmYXVsdF9wcm9tcHQgVEVYVCxcbiAgbWF4X3Rva2VucyBJTlRFR0VSLFxuICB0ZW1wZXJhdHVyZSBSRUFMLFxuICB0b3BfcCBSRUFMLFxuICBhY3RpdmUgSU5URUdFUiBOT1QgTlVMTCBERUZBVUxUIDEsXG4gIGNyZWF0ZWRfYXQgVEVYVCBOT1QgTlVMTCBERUZBVUxUIChkYXRldGltZSgnbm93JykpLFxuICB1cGRhdGVkX2F0IFRFWFQsXG4gIEZPUkVJR04gS0VZIChtb2RlbF90ZXN0X2lkKSBSRUZFUkVOQ0VTIG1vZGVsc190ZXN0KGlkKSBPTiBERUxFVEUgU0VUIE5VTEwsXG4gIEZPUkVJR04gS0VZIChzZXJ2ZXJfZW52aXJvbm1lbnRfaWQpIFJFRkVSRU5DRVMgc2VydmVyX2Vudmlyb25tZW50cyhpZCkgT04gREVMRVRFIFNFVCBOVUxMXG4pO1xuXG5DUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyB0ZXN0X3N0ZXBzIChcbiAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxuICBwcm9maWxlX2lkIElOVEVHRVIgTk9UIE5VTEwsXG4gIHN0ZXBfb3JkZXIgSU5URUdFUiBOT1QgTlVMTCxcbiAgc3RlcF9uYW1lIFRFWFQgTk9UIE5VTEwsXG4gIGFwaV9tZXRob2QgVEVYVCBOT1QgTlVMTCxcbiAgYXBpX3BhdGggVEVYVCBOT1QgTlVMTCxcbiAgcmVxdWVzdF9ib2R5IFRFWFQsXG4gIGV4cGVjdGVkX3N0YXR1cyBJTlRFR0VSLFxuICBleHBlY3RlZF9jb250YWlucyBURVhULFxuICBwYXNzX3J1bGUgVEVYVCxcbiAgbm90ZXMgVEVYVCxcbiAgY3JlYXRlZF9hdCBURVhUIE5PVCBOVUxMIERFRkFVTFQgKGRhdGV0aW1lKCdub3cnKSksXG4gIEZPUkVJR04gS0VZIChwcm9maWxlX2lkKSBSRUZFUkVOQ0VTIHRlc3RfcHJvZmlsZXMoaWQpIE9OIERFTEVURSBDQVNDQURFXG4pO1xuXG5DUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBsb2dfZXZlbnRzIChcbiAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxuICBydW5faWQgSU5URUdFUixcbiAgbW9kZWxfaWQgSU5URUdFUixcbiAgdGVzdF9wcm9maWxlX2lkIElOVEVHRVIsXG4gIHNvdXJjZSBURVhUIE5PVCBOVUxMLFxuICBsZXZlbCBURVhUIE5PVCBOVUxMIERFRkFVTFQgJ2luZm8nLFxuICBtZXNzYWdlIFRFWFQgTk9UIE5VTEwsXG4gIGNyZWF0ZWRfYXQgVEVYVCBOT1QgTlVMTCBERUZBVUxUIChkYXRldGltZSgnbm93JykpLFxuICBGT1JFSUdOIEtFWSAocnVuX2lkKSBSRUZFUkVOQ0VTIHRlc3RfcnVucyhpZCkgT04gREVMRVRFIENBU0NBREUsXG4gIEZPUkVJR04gS0VZIChtb2RlbF9pZCkgUkVGRVJFTkNFUyBtb2RlbHNfdGVzdChpZCkgT04gREVMRVRFIFNFVCBOVUxMLFxuICBGT1JFSUdOIEtFWSAodGVzdF9wcm9maWxlX2lkKSBSRUZFUkVOQ0VTIHRlc3RfcHJvZmlsZXMoaWQpIE9OIERFTEVURSBTRVQgTlVMTFxuKTtcblxuQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgaHVnZ2luZ2ZhY2VfbWV0YSAoXG4gIGlkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcbiAgY2Fub25pY2FsX3BhdGggVEVYVCBOT1QgTlVMTCBVTklRVUUsXG4gIGRpc3BsYXlfcGF0aCBURVhULFxuICBlbGVtZW50X3R5cGUgVEVYVCBOT1QgTlVMTCxcbiAgZGVzY3JpcHRpb24gVEVYVCxcbiAgY2F0ZWdvcnkgVEVYVCxcbiAgc2VtYW50aWNfcm9sZSBURVhULFxuICBleGFtcGxlX3ZhbHVlIFRFWFQsXG4gIGFjdGl2ZSBJTlRFR0VSIE5PVCBOVUxMIERFRkFVTFQgMSxcbiAgZGV0YWlsZWQgSU5URUdFUiBOT1QgTlVMTCBERUZBVUxUIDAsXG4gIGV4dGVuc2l2ZSBJTlRFR0VSIE5PVCBOVUxMIERFRkFVTFQgMCxcbiAgcGFyZW50X3BhdGggVEVYVCxcbiAgdXBkYXRlZF9hdCBURVhUIE5PVCBOVUxMIERFRkFVTFQgKGRhdGV0aW1lKCdub3cnKSlcbik7XG5cbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG1vZGVsc190ZXN0X2h1Z2dpbmdmYWNlIChcbiAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxuICBtb2RlbF90ZXN0X2lkIElOVEVHRVIgTk9UIE5VTEwsXG4gIG1ldGFfaWQgSU5URUdFUiBOT1QgTlVMTCxcbiAgY2Fub25pY2FsX3BhdGggVEVYVCBOT1QgTlVMTCxcbiAgZGlzcGxheV9wYXRoIFRFWFQsXG4gIGVsZW1lbnRfdHlwZSBURVhUIE5PVCBOVUxMLFxuICB2YWx1ZV90ZXh0IFRFWFQsXG4gIHZhbHVlX2pzb24gVEVYVCxcbiAgbW9kZWxfY2FyZF9wYXRoIFRFWFQsXG4gIG1vZGVsX2NhcmRfc2VjdGlvbiBURVhULFxuICBzb3VyY2VfbGluZSBJTlRFR0VSLFxuICBkZXRlY3RlZF9hdCBURVhUIE5PVCBOVUxMIERFRkFVTFQgKGRhdGV0aW1lKCdub3cnKSksXG4gIEZPUkVJR04gS0VZIChtb2RlbF90ZXN0X2lkKSBSRUZFUkVOQ0VTIG1vZGVsc190ZXN0KGlkKSBPTiBERUxFVEUgQ0FTQ0FERSxcbiAgRk9SRUlHTiBLRVkgKG1ldGFfaWQpIFJFRkVSRU5DRVMgaHVnZ2luZ2ZhY2VfbWV0YShpZCkgT04gREVMRVRFIENBU0NBREVcbik7XG5cbkNSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIGlkeF9tb2RlbHNfdGVzdF9oZl9tb2RlbFxuICBPTiBtb2RlbHNfdGVzdF9odWdnaW5nZmFjZShtb2RlbF90ZXN0X2lkKTtcbkNSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIGlkeF9tb2RlbHNfdGVzdF9oZl9tZXRhXG4gIE9OIG1vZGVsc190ZXN0X2h1Z2dpbmdmYWNlKG1ldGFfaWQpO1xuXG5DUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBzd2FnZ2VyX2VuZHBvaW50cyAoXG4gIGlkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcbiAgbWV0aG9kIFRFWFQgTk9UIE5VTEwsXG4gIHBhdGggVEVYVCBOT1QgTlVMTCxcbiAgc3VtbWFyeSBURVhULFxuICBkZXNjcmlwdGlvbiBURVhULFxuICByZXF1ZXN0X3NjaGVtYSBURVhULFxuICByZXNwb25zZV9zY2hlbWEgVEVYVCxcbiAgbGFzdF9zeW5jZWQgVEVYVCBOT1QgTlVMTCBERUZBVUxUIChkYXRldGltZSgnbm93JykpLFxuICBVTklRVUUobWV0aG9kLCBwYXRoKVxuKTtcbmApO1xuXG50eXBlIFRhYmxlQ29sdW1uSW5mbyA9IHsgbmFtZTogc3RyaW5nIH07XG5mdW5jdGlvbiBlbnN1cmVDb2x1bW4odGFibGU6IHN0cmluZywgY29sdW1uOiBzdHJpbmcsIGRlZmluaXRpb246IHN0cmluZykge1xuICBjb25zdCBjb2x1bW5zID0gZGJcbiAgICAucHJlcGFyZShgUFJBR01BIHRhYmxlX2luZm8oJHt0YWJsZX0pYClcbiAgICAuYWxsKCkgYXMgVGFibGVDb2x1bW5JbmZvW107XG4gIGlmICghY29sdW1ucy5zb21lKChjb2wpID0+IGNvbC5uYW1lID09PSBjb2x1bW4pKSB7XG4gICAgZGIuZXhlYyhgQUxURVIgVEFCTEUgJHt0YWJsZX0gQUREIENPTFVNTiAke2NvbHVtbn0gJHtkZWZpbml0aW9ufWApO1xuICB9XG59XG5cbmVuc3VyZUNvbHVtbihcbiAgXCJsb2dfZXZlbnRzXCIsXG4gIFwibW9kZWxfaWRcIixcbiAgXCJJTlRFR0VSIFJFRkVSRU5DRVMgbW9kZWxzX3Rlc3QoaWQpXCJcbik7XG5lbnN1cmVDb2x1bW4oXG4gIFwibG9nX2V2ZW50c1wiLFxuICBcInRlc3RfcHJvZmlsZV9pZFwiLFxuICBcIklOVEVHRVIgUkVGRVJFTkNFUyB0ZXN0X3Byb2ZpbGVzKGlkKVwiXG4pO1xuXG5leHBvcnQgdHlwZSBUZXN0UnVuID0ge1xuICBpZDogbnVtYmVyO1xuICBtb2RlbF9uYW1lOiBzdHJpbmc7XG4gIHNjZW5hcmlvOiBzdHJpbmcgfCBudWxsO1xuICBzdGF0dXM6IHN0cmluZztcbiAgc3RhcnRlZF9hdDogc3RyaW5nO1xuICBjb21wbGV0ZWRfYXQ6IHN0cmluZyB8IG51bGw7XG4gIGxvYWRfZHVyYXRpb25fbXM6IG51bWJlciB8IG51bGw7XG4gIG5vdGVzOiBzdHJpbmcgfCBudWxsO1xufTtcblxuZXhwb3J0IHR5cGUgTG9nRXZlbnQgPSB7XG4gIGlkOiBudW1iZXI7XG4gIHJ1bl9pZDogbnVtYmVyIHwgbnVsbDtcbiAgbW9kZWxfaWQ6IG51bWJlciB8IG51bGw7XG4gIHRlc3RfcHJvZmlsZV9pZDogbnVtYmVyIHwgbnVsbDtcbiAgc291cmNlOiBzdHJpbmc7XG4gIGxldmVsOiBzdHJpbmc7XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xufTtcblxuZXhwb3J0IHR5cGUgSHVnZ2luZ2ZhY2VNZXRhID0ge1xuICBpZDogbnVtYmVyO1xuICBjYW5vbmljYWxfcGF0aDogc3RyaW5nO1xuICBkaXNwbGF5X3BhdGg6IHN0cmluZyB8IG51bGw7XG4gIGVsZW1lbnRfdHlwZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nIHwgbnVsbDtcbiAgY2F0ZWdvcnk6IHN0cmluZyB8IG51bGw7XG4gIHNlbWFudGljX3JvbGU6IHN0cmluZyB8IG51bGw7XG4gIGV4YW1wbGVfdmFsdWU6IHN0cmluZyB8IG51bGw7XG4gIGFjdGl2ZTogbnVtYmVyO1xuICBkZXRhaWxlZDogbnVtYmVyO1xuICBleHRlbnNpdmU6IG51bWJlcjtcbiAgcGFyZW50X3BhdGg6IHN0cmluZyB8IG51bGw7XG4gIHVwZGF0ZWRfYXQ6IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIE1vZGVsSHVnZ2luZ2ZhY2VFbGVtZW50ID0ge1xuICBpZDogbnVtYmVyO1xuICBtb2RlbF90ZXN0X2lkOiBudW1iZXI7XG4gIG1ldGFfaWQ6IG51bWJlcjtcbiAgY2Fub25pY2FsX3BhdGg6IHN0cmluZztcbiAgZGlzcGxheV9wYXRoOiBzdHJpbmcgfCBudWxsO1xuICBlbGVtZW50X3R5cGU6IHN0cmluZztcbiAgdmFsdWVfdGV4dDogc3RyaW5nIHwgbnVsbDtcbiAgdmFsdWVfanNvbjogc3RyaW5nIHwgbnVsbDtcbiAgbW9kZWxfY2FyZF9wYXRoOiBzdHJpbmcgfCBudWxsO1xuICBtb2RlbF9jYXJkX3NlY3Rpb246IHN0cmluZyB8IG51bGw7XG4gIHNvdXJjZV9saW5lOiBudW1iZXIgfCBudWxsO1xuICBkZXRlY3RlZF9hdDogc3RyaW5nO1xufTtcblxuZXhwb3J0IHR5cGUgTW9kZWxIdWdnaW5nZmFjZVJlY29yZCA9IE1vZGVsSHVnZ2luZ2ZhY2VFbGVtZW50ICYge1xuICBjYXRlZ29yeTogc3RyaW5nIHwgbnVsbDtcbiAgc2VtYW50aWNfcm9sZTogc3RyaW5nIHwgbnVsbDtcbiAgYWN0aXZlOiBudW1iZXI7XG4gIGRldGFpbGVkOiBudW1iZXI7XG4gIGV4dGVuc2l2ZTogbnVtYmVyO1xufTtcblxuZXhwb3J0IHR5cGUgVGVzdE1vZGVsQ29weSA9IHtcbiAgaWQ6IG51bWJlcjtcbiAgc291cmNlX21vZGVsX2lkOiBudW1iZXIgfCBudWxsO1xuICBtb2RlbF9uYW1lOiBzdHJpbmc7XG4gIGhmX3BhdGg6IHN0cmluZyB8IG51bGw7XG4gIGNhY2hlX2xvY2F0aW9uOiBzdHJpbmcgfCBudWxsO1xuICBjb21wYXRpYmlsaXR5X3N0YXR1czogc3RyaW5nIHwgbnVsbDtcbiAgbWV0YWRhdGE6IHN0cmluZyB8IG51bGw7XG4gIHN0YXR1czogc3RyaW5nO1xuICBub3Rlczogc3RyaW5nIHwgbnVsbDtcbiAgY2FjaGVkX2F0OiBzdHJpbmc7XG59O1xuXG5leHBvcnQgdHlwZSBNb2RlbFBhcmFtZXRlciA9IHtcbiAgaWQ6IG51bWJlcjtcbiAgbmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nIHwgbnVsbDtcbiAgZGF0YV90eXBlOiBzdHJpbmc7XG4gIHVuaXQ6IHN0cmluZyB8IG51bGw7XG4gIGRlZmF1bHRfdmFsdWU6IHN0cmluZyB8IG51bGw7XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgdXBkYXRlZF9hdDogc3RyaW5nIHwgbnVsbDtcbn07XG5cbmV4cG9ydCB0eXBlIE1vZGVsUGFyYW1ldGVyVmFsdWUgPSB7XG4gIGlkOiBudW1iZXI7XG4gIG1vZGVsX3Rlc3RfaWQ6IG51bWJlcjtcbiAgcGFyYW1ldGVyX2lkOiBudW1iZXI7XG4gIHZhbHVlOiBzdHJpbmcgfCBudWxsO1xuICBqc29uX3ZhbHVlOiBzdHJpbmcgfCBudWxsO1xuICBub3Rlczogc3RyaW5nIHwgbnVsbDtcbiAgcmVjb3JkZWRfYXQ6IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIFNlcnZlckVudmlyb25tZW50ID0ge1xuICBpZDogbnVtYmVyO1xuICBuYW1lOiBzdHJpbmc7XG4gIGhvc3RuYW1lOiBzdHJpbmcgfCBudWxsO1xuICBpcF9hZGRyZXNzOiBzdHJpbmcgfCBudWxsO1xuICBncHVfbW9kZWw6IHN0cmluZyB8IG51bGw7XG4gIGdwdV92cmFtX2diOiBudW1iZXIgfCBudWxsO1xuICBjcHVfbW9kZWw6IHN0cmluZyB8IG51bGw7XG4gIG9zX3ZlcnNpb246IHN0cmluZyB8IG51bGw7XG4gIHdzbF92ZXJzaW9uOiBzdHJpbmcgfCBudWxsO1xuICByb2NtX3ZlcnNpb246IHN0cmluZyB8IG51bGw7XG4gIG5vdGVzOiBzdHJpbmcgfCBudWxsO1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG59O1xuXG5leHBvcnQgdHlwZSBUZXN0UHJvZmlsZSA9IHtcbiAgaWQ6IG51bWJlcjtcbiAgbmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nIHwgbnVsbDtcbiAgbW9kZWxfdGVzdF9pZDogbnVtYmVyIHwgbnVsbDtcbiAgc2VydmVyX2Vudmlyb25tZW50X2lkOiBudW1iZXIgfCBudWxsO1xuICBkZWZhdWx0X3Byb21wdDogc3RyaW5nIHwgbnVsbDtcbiAgbWF4X3Rva2VuczogbnVtYmVyIHwgbnVsbDtcbiAgdGVtcGVyYXR1cmU6IG51bWJlciB8IG51bGw7XG4gIHRvcF9wOiBudW1iZXIgfCBudWxsO1xuICBhY3RpdmU6IG51bWJlcjtcbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICB1cGRhdGVkX2F0OiBzdHJpbmcgfCBudWxsO1xufTtcblxuZXhwb3J0IHR5cGUgVGVzdFN0ZXAgPSB7XG4gIGlkOiBudW1iZXI7XG4gIHByb2ZpbGVfaWQ6IG51bWJlcjtcbiAgc3RlcF9vcmRlcjogbnVtYmVyO1xuICBzdGVwX25hbWU6IHN0cmluZztcbiAgYXBpX21ldGhvZDogc3RyaW5nO1xuICBhcGlfcGF0aDogc3RyaW5nO1xuICByZXF1ZXN0X2JvZHk6IHN0cmluZyB8IG51bGw7XG4gIGV4cGVjdGVkX3N0YXR1czogbnVtYmVyIHwgbnVsbDtcbiAgZXhwZWN0ZWRfY29udGFpbnM6IHN0cmluZyB8IG51bGw7XG4gIHBhc3NfcnVsZTogc3RyaW5nIHwgbnVsbDtcbiAgbm90ZXM6IHN0cmluZyB8IG51bGw7XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIFN3YWdnZXJFbmRwb2ludCA9IHtcbiAgaWQ6IG51bWJlcjtcbiAgbWV0aG9kOiBzdHJpbmc7XG4gIHBhdGg6IHN0cmluZztcbiAgc3VtbWFyeTogc3RyaW5nIHwgbnVsbDtcbiAgZGVzY3JpcHRpb246IHN0cmluZyB8IG51bGw7XG4gIHJlcXVlc3Rfc2NoZW1hOiBzdHJpbmcgfCBudWxsO1xuICByZXNwb25zZV9zY2hlbWE6IHN0cmluZyB8IG51bGw7XG4gIGxhc3Rfc3luY2VkOiBzdHJpbmc7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVjZW50UnVucyhsaW1pdCA9IDE1KTogVGVzdFJ1bltdIHtcbiAgY29uc3Qgc3RtdCA9IGRiLnByZXBhcmUoXG4gICAgYFNFTEVDVCAqIEZST00gdGVzdF9ydW5zIE9SREVSIEJZIGRhdGV0aW1lKHN0YXJ0ZWRfYXQpIERFU0MgTElNSVQgP2BcbiAgKTtcbiAgcmV0dXJuIHN0bXQuYWxsKGxpbWl0KSBhcyBUZXN0UnVuW107XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbnNlcnRUZXN0UnVuKGRhdGE6IHtcbiAgbW9kZWxfbmFtZTogc3RyaW5nO1xuICBzY2VuYXJpbz86IHN0cmluZztcbiAgbm90ZXM/OiBzdHJpbmc7XG59KTogVGVzdFJ1biB7XG4gIGNvbnN0IHN0bXQgPSBkYi5wcmVwYXJlKFxuICAgIGBJTlNFUlQgSU5UTyB0ZXN0X3J1bnMgKG1vZGVsX25hbWUsIHNjZW5hcmlvLCBub3RlcylcbiAgICAgVkFMVUVTIChAbW9kZWxfbmFtZSwgQHNjZW5hcmlvLCBAbm90ZXMpYFxuICApO1xuICBjb25zdCBpbmZvID0gc3RtdC5ydW4oe1xuICAgIG1vZGVsX25hbWU6IGRhdGEubW9kZWxfbmFtZSxcbiAgICBzY2VuYXJpbzogZGF0YS5zY2VuYXJpbyA/PyBudWxsLFxuICAgIG5vdGVzOiBkYXRhLm5vdGVzID8/IG51bGwsXG4gIH0pO1xuICByZXR1cm4gZ2V0UnVuQnlJZChOdW1iZXIoaW5mby5sYXN0SW5zZXJ0Um93aWQpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVJ1blN0YXR1cyhkYXRhOiB7XG4gIGlkOiBudW1iZXI7XG4gIHN0YXR1cz86IHN0cmluZztcbiAgbG9hZF9kdXJhdGlvbl9tcz86IG51bWJlciB8IG51bGw7XG4gIG5vdGVzPzogc3RyaW5nIHwgbnVsbDtcbn0pOiBUZXN0UnVuIHtcbiAgY29uc3Qgc3RtdCA9IGRiLnByZXBhcmUoXG4gICAgYFVQREFURSB0ZXN0X3J1bnNcbiAgICAgU0VUIHN0YXR1cyA9IENPQUxFU0NFKEBzdGF0dXMsIHN0YXR1cyksXG4gICAgICAgICBsb2FkX2R1cmF0aW9uX21zID0gQ09BTEVTQ0UoQGxvYWRfZHVyYXRpb25fbXMsIGxvYWRfZHVyYXRpb25fbXMpLFxuICAgICAgICAgY29tcGxldGVkX2F0ID0gQ0FTRVxuICAgICAgICAgICAgV0hFTiBAc3RhdHVzIElOICgnZmFpbGVkJywnc3VjY2VzcycpIFRIRU4gZGF0ZXRpbWUoJ25vdycpXG4gICAgICAgICAgICBFTFNFIGNvbXBsZXRlZF9hdFxuICAgICAgICAgRU5ELFxuICAgICAgICAgbm90ZXMgPSBDT0FMRVNDRShAbm90ZXMsIG5vdGVzKVxuICAgICBXSEVSRSBpZCA9IEBpZGBcbiAgKTtcbiAgc3RtdC5ydW4oe1xuICAgIGlkOiBkYXRhLmlkLFxuICAgIHN0YXR1czogZGF0YS5zdGF0dXMsXG4gICAgbG9hZF9kdXJhdGlvbl9tczogZGF0YS5sb2FkX2R1cmF0aW9uX21zID8/IG51bGwsXG4gICAgbm90ZXM6IGRhdGEubm90ZXMsXG4gIH0pO1xuICByZXR1cm4gZ2V0UnVuQnlJZChkYXRhLmlkKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJ1bkJ5SWQoaWQ6IG51bWJlcik6IFRlc3RSdW4ge1xuICBjb25zdCBzdG10ID0gZGIucHJlcGFyZShgU0VMRUNUICogRlJPTSB0ZXN0X3J1bnMgV0hFUkUgaWQgPSA/YCk7XG4gIHJldHVybiBzdG10LmdldChpZCkgYXMgVGVzdFJ1bjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluc2VydExvZ0V2ZW50KGRhdGE6IHtcbiAgcnVuX2lkPzogbnVtYmVyO1xuICBtb2RlbF9pZDogbnVtYmVyO1xuICB0ZXN0X3Byb2ZpbGVfaWQ/OiBudW1iZXI7XG4gIHNvdXJjZTogc3RyaW5nO1xuICBsZXZlbD86IHN0cmluZztcbiAgbWVzc2FnZTogc3RyaW5nO1xufSk6IExvZ0V2ZW50IHtcbiAgY29uc3Qgc3RtdCA9IGRiLnByZXBhcmUoXG4gICAgYElOU0VSVCBJTlRPIGxvZ19ldmVudHMgKHJ1bl9pZCwgbW9kZWxfaWQsIHRlc3RfcHJvZmlsZV9pZCwgc291cmNlLCBsZXZlbCwgbWVzc2FnZSlcbiAgICAgVkFMVUVTIChAcnVuX2lkLCBAbW9kZWxfaWQsIEB0ZXN0X3Byb2ZpbGVfaWQsIEBzb3VyY2UsIENPQUxFU0NFKEBsZXZlbCwgJ2luZm8nKSwgQG1lc3NhZ2UpYFxuICApO1xuICBjb25zdCBpbmZvID0gc3RtdC5ydW4oe1xuICAgIHJ1bl9pZDogZGF0YS5ydW5faWQgPz8gbnVsbCxcbiAgICBtb2RlbF9pZDogZGF0YS5tb2RlbF9pZCxcbiAgICB0ZXN0X3Byb2ZpbGVfaWQ6IGRhdGEudGVzdF9wcm9maWxlX2lkID8/IG51bGwsXG4gICAgc291cmNlOiBkYXRhLnNvdXJjZSxcbiAgICBsZXZlbDogZGF0YS5sZXZlbCA/PyBcImluZm9cIixcbiAgICBtZXNzYWdlOiBkYXRhLm1lc3NhZ2UsXG4gIH0pO1xuICByZXR1cm4gZ2V0TG9nQnlJZChOdW1iZXIoaW5mby5sYXN0SW5zZXJ0Um93aWQpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldExvZ0J5SWQoaWQ6IG51bWJlcik6IExvZ0V2ZW50IHtcbiAgY29uc3Qgc3RtdCA9IGRiLnByZXBhcmUoYFNFTEVDVCAqIEZST00gbG9nX2V2ZW50cyBXSEVSRSBpZCA9ID9gKTtcbiAgcmV0dXJuIHN0bXQuZ2V0KGlkKSBhcyBMb2dFdmVudDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlY2VudExvZ3MobGltaXQgPSA1MCk6IExvZ0V2ZW50W10ge1xuICBjb25zdCBzdG10ID0gZGIucHJlcGFyZShcbiAgICBgU0VMRUNUICogRlJPTSBsb2dfZXZlbnRzIE9SREVSIEJZIGRhdGV0aW1lKGNyZWF0ZWRfYXQpIERFU0MgTElNSVQgP2BcbiAgKTtcbiAgcmV0dXJuIHN0bXQuYWxsKGxpbWl0KSBhcyBMb2dFdmVudFtdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5zZXJ0T3JVcGRhdGVUZXN0TW9kZWwoZGF0YToge1xuICBzb3VyY2VfbW9kZWxfaWQ/OiBudW1iZXIgfCBudWxsO1xuICBtb2RlbF9uYW1lOiBzdHJpbmc7XG4gIGhmX3BhdGg/OiBzdHJpbmcgfCBudWxsO1xuICBjYWNoZV9sb2NhdGlvbj86IHN0cmluZyB8IG51bGw7XG4gIGNvbXBhdGliaWxpdHlfc3RhdHVzPzogc3RyaW5nIHwgbnVsbDtcbiAgbWV0YWRhdGE/OiBzdHJpbmcgfCBudWxsO1xuICBzdGF0dXM/OiBzdHJpbmc7XG4gIG5vdGVzPzogc3RyaW5nIHwgbnVsbDtcbn0pOiBUZXN0TW9kZWxDb3B5IHtcbiAgY29uc3QgZXhpc3RpbmcgPSBnZXRUZXN0TW9kZWxCeU5hbWUoZGF0YS5tb2RlbF9uYW1lKTtcbiAgaWYgKGV4aXN0aW5nKSB7XG4gICAgY29uc3Qgc3RtdCA9IGRiLnByZXBhcmUoXG4gICAgICBgVVBEQVRFIG1vZGVsc190ZXN0XG4gICAgICAgU0VUIHNvdXJjZV9tb2RlbF9pZCA9IENPQUxFU0NFKEBzb3VyY2VfbW9kZWxfaWQsIHNvdXJjZV9tb2RlbF9pZCksXG4gICAgICAgICAgIGhmX3BhdGggPSBDT0FMRVNDRShAaGZfcGF0aCwgaGZfcGF0aCksXG4gICAgICAgICAgIGNhY2hlX2xvY2F0aW9uID0gQ09BTEVTQ0UoQGNhY2hlX2xvY2F0aW9uLCBjYWNoZV9sb2NhdGlvbiksXG4gICAgICAgICAgIGNvbXBhdGliaWxpdHlfc3RhdHVzID0gQ09BTEVTQ0UoQGNvbXBhdGliaWxpdHlfc3RhdHVzLCBjb21wYXRpYmlsaXR5X3N0YXR1cyksXG4gICAgICAgICAgIG1ldGFkYXRhID0gQ09BTEVTQ0UoQG1ldGFkYXRhLCBtZXRhZGF0YSksXG4gICAgICAgICAgIHN0YXR1cyA9IENPQUxFU0NFKEBzdGF0dXMsIHN0YXR1cyksXG4gICAgICAgICAgIG5vdGVzID0gQ09BTEVTQ0UoQG5vdGVzLCBub3RlcyksXG4gICAgICAgICAgIGNhY2hlZF9hdCA9IGRhdGV0aW1lKCdub3cnKVxuICAgICAgIFdIRVJFIG1vZGVsX25hbWUgPSBAbW9kZWxfbmFtZWBcbiAgICApO1xuICAgIHN0bXQucnVuKHtcbiAgICAgIC4uLmRhdGEsXG4gICAgICBzb3VyY2VfbW9kZWxfaWQ6IGRhdGEuc291cmNlX21vZGVsX2lkID8/IG51bGwsXG4gICAgICBoZl9wYXRoOiBkYXRhLmhmX3BhdGggPz8gbnVsbCxcbiAgICAgIGNhY2hlX2xvY2F0aW9uOiBkYXRhLmNhY2hlX2xvY2F0aW9uID8/IG51bGwsXG4gICAgICBjb21wYXRpYmlsaXR5X3N0YXR1czogZGF0YS5jb21wYXRpYmlsaXR5X3N0YXR1cyA/PyBudWxsLFxuICAgICAgbWV0YWRhdGE6IGRhdGEubWV0YWRhdGEgPz8gbnVsbCxcbiAgICAgIHN0YXR1czogZGF0YS5zdGF0dXMgPz8gbnVsbCxcbiAgICAgIG5vdGVzOiBkYXRhLm5vdGVzID8/IG51bGwsXG4gICAgfSk7XG4gICAgcmV0dXJuIGdldFRlc3RNb2RlbEJ5TmFtZShkYXRhLm1vZGVsX25hbWUpITtcbiAgfVxuXG4gIGNvbnN0IHN0bXQgPSBkYi5wcmVwYXJlKFxuICAgIGBJTlNFUlQgSU5UTyBtb2RlbHNfdGVzdFxuICAgICAgKHNvdXJjZV9tb2RlbF9pZCwgbW9kZWxfbmFtZSwgaGZfcGF0aCwgY2FjaGVfbG9jYXRpb24sIGNvbXBhdGliaWxpdHlfc3RhdHVzLCBtZXRhZGF0YSwgc3RhdHVzLCBub3RlcylcbiAgICAgVkFMVUVTXG4gICAgICAoQHNvdXJjZV9tb2RlbF9pZCwgQG1vZGVsX25hbWUsIEBoZl9wYXRoLCBAY2FjaGVfbG9jYXRpb24sIEBjb21wYXRpYmlsaXR5X3N0YXR1cywgQG1ldGFkYXRhLCBDT0FMRVNDRShAc3RhdHVzLCAnc3RhZ2VkJyksIEBub3RlcylgXG4gICk7XG4gIGNvbnN0IGluZm8gPSBzdG10LnJ1bih7XG4gICAgc291cmNlX21vZGVsX2lkOiBkYXRhLnNvdXJjZV9tb2RlbF9pZCA/PyBudWxsLFxuICAgIG1vZGVsX25hbWU6IGRhdGEubW9kZWxfbmFtZSxcbiAgICBoZl9wYXRoOiBkYXRhLmhmX3BhdGggPz8gbnVsbCxcbiAgICBjYWNoZV9sb2NhdGlvbjogZGF0YS5jYWNoZV9sb2NhdGlvbiA/PyBudWxsLFxuICAgIGNvbXBhdGliaWxpdHlfc3RhdHVzOiBkYXRhLmNvbXBhdGliaWxpdHlfc3RhdHVzID8/IG51bGwsXG4gICAgbWV0YWRhdGE6IGRhdGEubWV0YWRhdGEgPz8gbnVsbCxcbiAgICBzdGF0dXM6IGRhdGEuc3RhdHVzID8/IFwic3RhZ2VkXCIsXG4gICAgbm90ZXM6IGRhdGEubm90ZXMgPz8gbnVsbCxcbiAgfSk7XG4gIHJldHVybiBnZXRUZXN0TW9kZWxCeUlkKE51bWJlcihpbmZvLmxhc3RJbnNlcnRSb3dpZCkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGVzdE1vZGVscygpOiBUZXN0TW9kZWxDb3B5W10ge1xuICBjb25zdCBzdG10ID0gZGIucHJlcGFyZShcbiAgICBgU0VMRUNUICogRlJPTSBtb2RlbHNfdGVzdCBPUkRFUiBCWSBkYXRldGltZShjYWNoZWRfYXQpIERFU0NgXG4gICk7XG4gIHJldHVybiBzdG10LmFsbCgpIGFzIFRlc3RNb2RlbENvcHlbXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRlc3RNb2RlbEJ5SWQoaWQ6IG51bWJlcik6IFRlc3RNb2RlbENvcHkge1xuICBjb25zdCBzdG10ID0gZGIucHJlcGFyZShgU0VMRUNUICogRlJPTSBtb2RlbHNfdGVzdCBXSEVSRSBpZCA9ID9gKTtcbiAgcmV0dXJuIHN0bXQuZ2V0KGlkKSBhcyBUZXN0TW9kZWxDb3B5O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGVzdE1vZGVsQnlOYW1lKG1vZGVsX25hbWU6IHN0cmluZyk6IFRlc3RNb2RlbENvcHkgfCBudWxsIHtcbiAgY29uc3Qgc3RtdCA9IGRiLnByZXBhcmUoYFNFTEVDVCAqIEZST00gbW9kZWxzX3Rlc3QgV0hFUkUgbW9kZWxfbmFtZSA9ID9gKTtcbiAgY29uc3QgcmVzdWx0ID0gc3RtdC5nZXQobW9kZWxfbmFtZSk7XG4gIHJldHVybiAocmVzdWx0IGFzIFRlc3RNb2RlbENvcHkpIHx8IG51bGw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRIdWdnaW5nZmFjZU1ldGFUYWdzKCk6IEh1Z2dpbmdmYWNlTWV0YVtdIHtcbiAgY29uc3Qgc3RtdCA9IGRiLnByZXBhcmUoXG4gICAgYFNFTEVDVCAqIEZST00gaHVnZ2luZ2ZhY2VfbWV0YSBPUkRFUiBCWSBjYW5vbmljYWxfcGF0aGBcbiAgKTtcbiAgcmV0dXJuIHN0bXQuYWxsKCkgYXMgSHVnZ2luZ2ZhY2VNZXRhW107XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRIdWdnaW5nZmFjZU1ldGFCeUlkKGlkOiBudW1iZXIpOiBIdWdnaW5nZmFjZU1ldGEgfCBudWxsIHtcbiAgY29uc3Qgc3RtdCA9IGRiLnByZXBhcmUoYFNFTEVDVCAqIEZST00gaHVnZ2luZ2ZhY2VfbWV0YSBXSEVSRSBpZCA9ID9gKTtcbiAgcmV0dXJuIChzdG10LmdldChpZCkgYXMgSHVnZ2luZ2ZhY2VNZXRhKSA/PyBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlSHVnZ2luZ2ZhY2VNZXRhVGFnKGRhdGE6IHtcbiAgaWQ6IG51bWJlcjtcbiAgYWN0aXZlPzogYm9vbGVhbjtcbiAgZGV0YWlsZWQ/OiBib29sZWFuO1xuICBleHRlbnNpdmU/OiBib29sZWFuO1xufSk6IEh1Z2dpbmdmYWNlTWV0YSB7XG4gIGNvbnN0IHVwZGF0ZXM6IHN0cmluZ1tdID0gW107XG4gIGNvbnN0IHBhcmFtczogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSB7IGlkOiBkYXRhLmlkIH07XG4gIGlmIChkYXRhLmFjdGl2ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdXBkYXRlcy5wdXNoKFwiYWN0aXZlID0gQGFjdGl2ZVwiKTtcbiAgICBwYXJhbXMuYWN0aXZlID0gZGF0YS5hY3RpdmUgPyAxIDogMDtcbiAgfVxuICBpZiAoZGF0YS5kZXRhaWxlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdXBkYXRlcy5wdXNoKFwiZGV0YWlsZWQgPSBAZGV0YWlsZWRcIik7XG4gICAgcGFyYW1zLmRldGFpbGVkID0gZGF0YS5kZXRhaWxlZCA/IDEgOiAwO1xuICB9XG4gIGlmIChkYXRhLmV4dGVuc2l2ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdXBkYXRlcy5wdXNoKFwiZXh0ZW5zaXZlID0gQGV4dGVuc2l2ZVwiKTtcbiAgICBwYXJhbXMuZXh0ZW5zaXZlID0gZGF0YS5leHRlbnNpdmUgPyAxIDogMDtcbiAgfVxuICBpZiAodXBkYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgY29uc3Qgc3RtdCA9IGRiLnByZXBhcmUoXG4gICAgICBgVVBEQVRFIGh1Z2dpbmdmYWNlX21ldGFcbiAgICAgICBTRVQgJHt1cGRhdGVzLmpvaW4oXCIsIFwiKX0sXG4gICAgICAgICAgIHVwZGF0ZWRfYXQgPSBkYXRldGltZSgnbm93JylcbiAgICAgICBXSEVSRSBpZCA9IEBpZGBcbiAgICApO1xuICAgIHN0bXQucnVuKHBhcmFtcyk7XG4gIH1cbiAgcmV0dXJuIGdldEh1Z2dpbmdmYWNlTWV0YUJ5SWQoZGF0YS5pZCkhO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SHVnZ2luZ2ZhY2VNZXRhZGF0YUZvck1vZGVsKFxuICBtb2RlbF90ZXN0X2lkOiBudW1iZXJcbik6IE1vZGVsSHVnZ2luZ2ZhY2VSZWNvcmRbXSB7XG4gIGNvbnN0IHN0bXQgPSBkYi5wcmVwYXJlKFxuICAgIGBTRUxFQ1RcbiAgICAgICBtdGguKixcbiAgICAgICBobS5jYXRlZ29yeSxcbiAgICAgICBobS5zZW1hbnRpY19yb2xlLFxuICAgICAgIGhtLmFjdGl2ZSxcbiAgICAgICBobS5kZXRhaWxlZCxcbiAgICAgICBobS5leHRlbnNpdmVcbiAgICAgRlJPTSBtb2RlbHNfdGVzdF9odWdnaW5nZmFjZSBBUyBtdGhcbiAgICAgSk9JTiBodWdnaW5nZmFjZV9tZXRhIEFTIGhtIE9OIGhtLmlkID0gbXRoLm1ldGFfaWRcbiAgICAgV0hFUkUgbXRoLm1vZGVsX3Rlc3RfaWQgPSA/XG4gICAgIE9SREVSIEJZIGhtLmNhbm9uaWNhbF9wYXRoLCBtdGguc291cmNlX2xpbmVgXG4gICk7XG4gIHJldHVybiBzdG10LmFsbChtb2RlbF90ZXN0X2lkKSBhcyBNb2RlbEh1Z2dpbmdmYWNlUmVjb3JkW107XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVIdWdnaW5nZmFjZU1ldGFkYXRhRm9yTW9kZWwobW9kZWxfdGVzdF9pZDogbnVtYmVyKSB7XG4gIGNvbnN0IHN0bXQgPSBkYi5wcmVwYXJlKFxuICAgIGBERUxFVEUgRlJPTSBtb2RlbHNfdGVzdF9odWdnaW5nZmFjZSBXSEVSRSBtb2RlbF90ZXN0X2lkID0gP2BcbiAgKTtcbiAgc3RtdC5ydW4obW9kZWxfdGVzdF9pZCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cHNlcnRNb2RlbFBhcmFtZXRlcihwYXJhbToge1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nIHwgbnVsbDtcbiAgZGF0YV90eXBlOiBzdHJpbmc7XG4gIHVuaXQ/OiBzdHJpbmcgfCBudWxsO1xuICBkZWZhdWx0X3ZhbHVlPzogc3RyaW5nIHwgbnVsbDtcbn0pOiBNb2RlbFBhcmFtZXRlciB7XG4gIGNvbnN0IHN0bXQgPSBkYi5wcmVwYXJlKFxuICAgIGBJTlNFUlQgSU5UTyBtb2RlbF9wYXJhbWV0ZXJzIChuYW1lLCBkZXNjcmlwdGlvbiwgZGF0YV90eXBlLCB1bml0LCBkZWZhdWx0X3ZhbHVlKVxuICAgICBWQUxVRVMgKEBuYW1lLCBAZGVzY3JpcHRpb24sIEBkYXRhX3R5cGUsIEB1bml0LCBAZGVmYXVsdF92YWx1ZSlcbiAgICAgT04gQ09ORkxJQ1QobmFtZSkgRE8gVVBEQVRFIFNFVFxuICAgICAgIGRlc2NyaXB0aW9uID0gZXhjbHVkZWQuZGVzY3JpcHRpb24sXG4gICAgICAgZGF0YV90eXBlID0gZXhjbHVkZWQuZGF0YV90eXBlLFxuICAgICAgIHVuaXQgPSBleGNsdWRlZC51bml0LFxuICAgICAgIGRlZmF1bHRfdmFsdWUgPSBleGNsdWRlZC5kZWZhdWx0X3ZhbHVlLFxuICAgICAgIHVwZGF0ZWRfYXQgPSBkYXRldGltZSgnbm93JylgXG4gICk7XG4gIHN0bXQucnVuKHtcbiAgICBuYW1lOiBwYXJhbS5uYW1lLFxuICAgIGRlc2NyaXB0aW9uOiBwYXJhbS5kZXNjcmlwdGlvbiA/PyBudWxsLFxuICAgIGRhdGFfdHlwZTogcGFyYW0uZGF0YV90eXBlLFxuICAgIHVuaXQ6IHBhcmFtLnVuaXQgPz8gbnVsbCxcbiAgICBkZWZhdWx0X3ZhbHVlOiBwYXJhbS5kZWZhdWx0X3ZhbHVlID8/IG51bGwsXG4gIH0pO1xuICBjb25zdCByb3cgPSBkYlxuICAgIC5wcmVwYXJlKGBTRUxFQ1QgKiBGUk9NIG1vZGVsX3BhcmFtZXRlcnMgV0hFUkUgbmFtZSA9ID9gKVxuICAgIC5nZXQocGFyYW0ubmFtZSk7XG4gIHJldHVybiByb3cgYXMgTW9kZWxQYXJhbWV0ZXI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRNb2RlbFBhcmFtZXRlcnMoKTogTW9kZWxQYXJhbWV0ZXJbXSB7XG4gIGNvbnN0IHN0bXQgPSBkYi5wcmVwYXJlKFxuICAgIGBTRUxFQ1QgKiBGUk9NIG1vZGVsX3BhcmFtZXRlcnMgT1JERVIgQlkgZGF0ZXRpbWUoY3JlYXRlZF9hdCkgREVTQ2BcbiAgKTtcbiAgcmV0dXJuIHN0bXQuYWxsKCkgYXMgTW9kZWxQYXJhbWV0ZXJbXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluc2VydE1vZGVsUGFyYW1ldGVyVmFsdWUoZGF0YToge1xuICBtb2RlbF90ZXN0X2lkOiBudW1iZXI7XG4gIHBhcmFtZXRlcl9pZDogbnVtYmVyO1xuICB2YWx1ZT86IHN0cmluZyB8IG51bGw7XG4gIGpzb25fdmFsdWU/OiB1bmtub3duO1xuICBub3Rlcz86IHN0cmluZyB8IG51bGw7XG59KTogTW9kZWxQYXJhbWV0ZXJWYWx1ZSB7XG4gIGNvbnN0IHN0bXQgPSBkYi5wcmVwYXJlKFxuICAgIGBJTlNFUlQgSU5UTyBtb2RlbF9wYXJhbWV0ZXJfdmFsdWVzXG4gICAgICAobW9kZWxfdGVzdF9pZCwgcGFyYW1ldGVyX2lkLCB2YWx1ZSwganNvbl92YWx1ZSwgbm90ZXMpXG4gICAgIFZBTFVFU1xuICAgICAgKEBtb2RlbF90ZXN0X2lkLCBAcGFyYW1ldGVyX2lkLCBAdmFsdWUsIEBqc29uX3ZhbHVlLCBAbm90ZXMpYFxuICApO1xuICBjb25zdCBpbmZvID0gc3RtdC5ydW4oe1xuICAgIG1vZGVsX3Rlc3RfaWQ6IGRhdGEubW9kZWxfdGVzdF9pZCxcbiAgICBwYXJhbWV0ZXJfaWQ6IGRhdGEucGFyYW1ldGVyX2lkLFxuICAgIHZhbHVlOiBkYXRhLnZhbHVlID8/IG51bGwsXG4gICAganNvbl92YWx1ZTpcbiAgICAgIGRhdGEuanNvbl92YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IGRhdGEuanNvbl92YWx1ZSA9PT0gbnVsbFxuICAgICAgICA/IG51bGxcbiAgICAgICAgOiB0eXBlb2YgZGF0YS5qc29uX3ZhbHVlID09PSBcInN0cmluZ1wiXG4gICAgICAgID8gZGF0YS5qc29uX3ZhbHVlXG4gICAgICAgIDogSlNPTi5zdHJpbmdpZnkoZGF0YS5qc29uX3ZhbHVlKSxcbiAgICBub3RlczogZGF0YS5ub3RlcyA/PyBudWxsLFxuICB9KTtcbiAgcmV0dXJuIGdldE1vZGVsUGFyYW1ldGVyVmFsdWVCeUlkKE51bWJlcihpbmZvLmxhc3RJbnNlcnRSb3dpZCkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TW9kZWxQYXJhbWV0ZXJWYWx1ZUJ5SWQoXG4gIGlkOiBudW1iZXJcbik6IE1vZGVsUGFyYW1ldGVyVmFsdWUge1xuICBjb25zdCBzdG10ID0gZGIucHJlcGFyZShcbiAgICBgU0VMRUNUICogRlJPTSBtb2RlbF9wYXJhbWV0ZXJfdmFsdWVzIFdIRVJFIGlkID0gP2BcbiAgKTtcbiAgcmV0dXJuIHN0bXQuZ2V0KGlkKSBhcyBNb2RlbFBhcmFtZXRlclZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGFyYW1ldGVyVmFsdWVzRm9yTW9kZWwoXG4gIG1vZGVsX3Rlc3RfaWQ6IG51bWJlclxuKTogTW9kZWxQYXJhbWV0ZXJWYWx1ZVtdIHtcbiAgY29uc3Qgc3RtdCA9IGRiLnByZXBhcmUoXG4gICAgYFNFTEVDVCAqIEZST00gbW9kZWxfcGFyYW1ldGVyX3ZhbHVlc1xuICAgICBXSEVSRSBtb2RlbF90ZXN0X2lkID0gP1xuICAgICBPUkRFUiBCWSBkYXRldGltZShyZWNvcmRlZF9hdCkgREVTQ2BcbiAgKTtcbiAgcmV0dXJuIHN0bXQuYWxsKG1vZGVsX3Rlc3RfaWQpIGFzIE1vZGVsUGFyYW1ldGVyVmFsdWVbXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZU1vZGVsUGFyYW1ldGVyVmFsdWUoaWQ6IG51bWJlcikge1xuICBkYi5wcmVwYXJlKGBERUxFVEUgRlJPTSBtb2RlbF9wYXJhbWV0ZXJfdmFsdWVzIFdIRVJFIGlkID0gP2ApLnJ1bihpZCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cHNlcnRTZXJ2ZXJFbnZpcm9ubWVudChlbnY6IHtcbiAgbmFtZTogc3RyaW5nO1xuICBob3N0bmFtZT86IHN0cmluZyB8IG51bGw7XG4gIGlwX2FkZHJlc3M/OiBzdHJpbmcgfCBudWxsO1xuICBncHVfbW9kZWw/OiBzdHJpbmcgfCBudWxsO1xuICBncHVfdnJhbV9nYj86IG51bWJlciB8IG51bGw7XG4gIGNwdV9tb2RlbD86IHN0cmluZyB8IG51bGw7XG4gIG9zX3ZlcnNpb24/OiBzdHJpbmcgfCBudWxsO1xuICB3c2xfdmVyc2lvbj86IHN0cmluZyB8IG51bGw7XG4gIHJvY21fdmVyc2lvbj86IHN0cmluZyB8IG51bGw7XG4gIG5vdGVzPzogc3RyaW5nIHwgbnVsbDtcbn0pOiBTZXJ2ZXJFbnZpcm9ubWVudCB7XG4gIGNvbnN0IHN0bXQgPSBkYi5wcmVwYXJlKFxuICAgIGBJTlNFUlQgSU5UTyBzZXJ2ZXJfZW52aXJvbm1lbnRzXG4gICAgICAobmFtZSwgaG9zdG5hbWUsIGlwX2FkZHJlc3MsIGdwdV9tb2RlbCwgZ3B1X3ZyYW1fZ2IsIGNwdV9tb2RlbCwgb3NfdmVyc2lvbiwgd3NsX3ZlcnNpb24sIHJvY21fdmVyc2lvbiwgbm90ZXMpXG4gICAgIFZBTFVFU1xuICAgICAgKEBuYW1lLCBAaG9zdG5hbWUsIEBpcF9hZGRyZXNzLCBAZ3B1X21vZGVsLCBAZ3B1X3ZyYW1fZ2IsIEBjcHVfbW9kZWwsIEBvc192ZXJzaW9uLCBAd3NsX3ZlcnNpb24sIEByb2NtX3ZlcnNpb24sIEBub3RlcylcbiAgICAgT04gQ09ORkxJQ1QobmFtZSkgRE8gVVBEQVRFIFNFVFxuICAgICAgaG9zdG5hbWUgPSBleGNsdWRlZC5ob3N0bmFtZSxcbiAgICAgIGlwX2FkZHJlc3MgPSBleGNsdWRlZC5pcF9hZGRyZXNzLFxuICAgICAgZ3B1X21vZGVsID0gZXhjbHVkZWQuZ3B1X21vZGVsLFxuICAgICAgZ3B1X3ZyYW1fZ2IgPSBleGNsdWRlZC5ncHVfdnJhbV9nYixcbiAgICAgIGNwdV9tb2RlbCA9IGV4Y2x1ZGVkLmNwdV9tb2RlbCxcbiAgICAgIG9zX3ZlcnNpb24gPSBleGNsdWRlZC5vc192ZXJzaW9uLFxuICAgICAgd3NsX3ZlcnNpb24gPSBleGNsdWRlZC53c2xfdmVyc2lvbixcbiAgICAgIHJvY21fdmVyc2lvbiA9IGV4Y2x1ZGVkLnJvY21fdmVyc2lvbixcbiAgICAgIG5vdGVzID0gZXhjbHVkZWQubm90ZXNgXG4gICk7XG4gIHN0bXQucnVuKHtcbiAgICBuYW1lOiBlbnYubmFtZSxcbiAgICBob3N0bmFtZTogZW52Lmhvc3RuYW1lID8/IG51bGwsXG4gICAgaXBfYWRkcmVzczogZW52LmlwX2FkZHJlc3MgPz8gbnVsbCxcbiAgICBncHVfbW9kZWw6IGVudi5ncHVfbW9kZWwgPz8gbnVsbCxcbiAgICBncHVfdnJhbV9nYjogZW52LmdwdV92cmFtX2diID8/IG51bGwsXG4gICAgY3B1X21vZGVsOiBlbnYuY3B1X21vZGVsID8/IG51bGwsXG4gICAgb3NfdmVyc2lvbjogZW52Lm9zX3ZlcnNpb24gPz8gbnVsbCxcbiAgICB3c2xfdmVyc2lvbjogZW52LndzbF92ZXJzaW9uID8/IG51bGwsXG4gICAgcm9jbV92ZXJzaW9uOiBlbnYucm9jbV92ZXJzaW9uID8/IG51bGwsXG4gICAgbm90ZXM6IGVudi5ub3RlcyA/PyBudWxsLFxuICB9KTtcbiAgY29uc3Qgcm93ID0gZGJcbiAgICAucHJlcGFyZShgU0VMRUNUICogRlJPTSBzZXJ2ZXJfZW52aXJvbm1lbnRzIFdIRVJFIG5hbWUgPSA/YClcbiAgICAuZ2V0KGVudi5uYW1lKTtcbiAgcmV0dXJuIHJvdyBhcyBTZXJ2ZXJFbnZpcm9ubWVudDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNlcnZlckVudmlyb25tZW50cygpOiBTZXJ2ZXJFbnZpcm9ubWVudFtdIHtcbiAgY29uc3Qgc3RtdCA9IGRiLnByZXBhcmUoXG4gICAgYFNFTEVDVCAqIEZST00gc2VydmVyX2Vudmlyb25tZW50cyBPUkRFUiBCWSBkYXRldGltZShjcmVhdGVkX2F0KSBERVNDYFxuICApO1xuICByZXR1cm4gc3RtdC5hbGwoKSBhcyBTZXJ2ZXJFbnZpcm9ubWVudFtdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5zZXJ0VGVzdFByb2ZpbGUocHJvZmlsZToge1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBtb2RlbF90ZXN0X2lkPzogbnVtYmVyIHwgbnVsbDtcbiAgc2VydmVyX2Vudmlyb25tZW50X2lkPzogbnVtYmVyIHwgbnVsbDtcbiAgZGVmYXVsdF9wcm9tcHQ/OiBzdHJpbmcgfCBudWxsO1xuICBtYXhfdG9rZW5zPzogbnVtYmVyIHwgbnVsbDtcbiAgdGVtcGVyYXR1cmU/OiBudW1iZXIgfCBudWxsO1xuICB0b3BfcD86IG51bWJlciB8IG51bGw7XG59KTogVGVzdFByb2ZpbGUge1xuICBjb25zdCBzdG10ID0gZGIucHJlcGFyZShcbiAgICBgSU5TRVJUIElOVE8gdGVzdF9wcm9maWxlc1xuICAgICAgKG5hbWUsIGRlc2NyaXB0aW9uLCBtb2RlbF90ZXN0X2lkLCBzZXJ2ZXJfZW52aXJvbm1lbnRfaWQsIGRlZmF1bHRfcHJvbXB0LCBtYXhfdG9rZW5zLCB0ZW1wZXJhdHVyZSwgdG9wX3ApXG4gICAgIFZBTFVFU1xuICAgICAgKEBuYW1lLCBAZGVzY3JpcHRpb24sIEBtb2RlbF90ZXN0X2lkLCBAc2VydmVyX2Vudmlyb25tZW50X2lkLCBAZGVmYXVsdF9wcm9tcHQsIEBtYXhfdG9rZW5zLCBAdGVtcGVyYXR1cmUsIEB0b3BfcClgXG4gICk7XG4gIGNvbnN0IGluZm8gPSBzdG10LnJ1bih7XG4gICAgbmFtZTogcHJvZmlsZS5uYW1lLFxuICAgIGRlc2NyaXB0aW9uOiBwcm9maWxlLmRlc2NyaXB0aW9uID8/IG51bGwsXG4gICAgbW9kZWxfdGVzdF9pZDogcHJvZmlsZS5tb2RlbF90ZXN0X2lkID8/IG51bGwsXG4gICAgc2VydmVyX2Vudmlyb25tZW50X2lkOiBwcm9maWxlLnNlcnZlcl9lbnZpcm9ubWVudF9pZCA/PyBudWxsLFxuICAgIGRlZmF1bHRfcHJvbXB0OiBwcm9maWxlLmRlZmF1bHRfcHJvbXB0ID8/IG51bGwsXG4gICAgbWF4X3Rva2VuczogcHJvZmlsZS5tYXhfdG9rZW5zID8/IG51bGwsXG4gICAgdGVtcGVyYXR1cmU6IHByb2ZpbGUudGVtcGVyYXR1cmUgPz8gbnVsbCxcbiAgICB0b3BfcDogcHJvZmlsZS50b3BfcCA/PyBudWxsLFxuICB9KTtcbiAgcmV0dXJuIGdldFRlc3RQcm9maWxlQnlJZChOdW1iZXIoaW5mby5sYXN0SW5zZXJ0Um93aWQpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVRlc3RQcm9maWxlKGRhdGE6IHtcbiAgaWQ6IG51bWJlcjtcbiAgbmFtZT86IHN0cmluZztcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmcgfCBudWxsO1xuICBtb2RlbF90ZXN0X2lkPzogbnVtYmVyIHwgbnVsbDtcbiAgc2VydmVyX2Vudmlyb25tZW50X2lkPzogbnVtYmVyIHwgbnVsbDtcbiAgZGVmYXVsdF9wcm9tcHQ/OiBzdHJpbmcgfCBudWxsO1xuICBtYXhfdG9rZW5zPzogbnVtYmVyIHwgbnVsbDtcbiAgdGVtcGVyYXR1cmU/OiBudW1iZXIgfCBudWxsO1xuICB0b3BfcD86IG51bWJlciB8IG51bGw7XG4gIGFjdGl2ZT86IG51bWJlcjtcbn0pOiBUZXN0UHJvZmlsZSB7XG4gIGNvbnN0IHN0bXQgPSBkYi5wcmVwYXJlKFxuICAgIGBVUERBVEUgdGVzdF9wcm9maWxlc1xuICAgICBTRVQgbmFtZSA9IENPQUxFU0NFKEBuYW1lLCBuYW1lKSxcbiAgICAgICAgIGRlc2NyaXB0aW9uID0gQ09BTEVTQ0UoQGRlc2NyaXB0aW9uLCBkZXNjcmlwdGlvbiksXG4gICAgICAgICBtb2RlbF90ZXN0X2lkID0gQ09BTEVTQ0UoQG1vZGVsX3Rlc3RfaWQsIG1vZGVsX3Rlc3RfaWQpLFxuICAgICAgICAgc2VydmVyX2Vudmlyb25tZW50X2lkID0gQ09BTEVTQ0UoQHNlcnZlcl9lbnZpcm9ubWVudF9pZCwgc2VydmVyX2Vudmlyb25tZW50X2lkKSxcbiAgICAgICAgIGRlZmF1bHRfcHJvbXB0ID0gQ09BTEVTQ0UoQGRlZmF1bHRfcHJvbXB0LCBkZWZhdWx0X3Byb21wdCksXG4gICAgICAgICBtYXhfdG9rZW5zID0gQ09BTEVTQ0UoQG1heF90b2tlbnMsIG1heF90b2tlbnMpLFxuICAgICAgICAgdGVtcGVyYXR1cmUgPSBDT0FMRVNDRShAdGVtcGVyYXR1cmUsIHRlbXBlcmF0dXJlKSxcbiAgICAgICAgIHRvcF9wID0gQ09BTEVTQ0UoQHRvcF9wLCB0b3BfcCksXG4gICAgICAgICBhY3RpdmUgPSBDT0FMRVNDRShAYWN0aXZlLCBhY3RpdmUpLFxuICAgICAgICAgdXBkYXRlZF9hdCA9IGRhdGV0aW1lKCdub3cnKVxuICAgICBXSEVSRSBpZCA9IEBpZGBcbiAgKTtcbiAgc3RtdC5ydW4oe1xuICAgIGlkOiBkYXRhLmlkLFxuICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbiA/PyBudWxsLFxuICAgIG1vZGVsX3Rlc3RfaWQ6IGRhdGEubW9kZWxfdGVzdF9pZCA/PyBudWxsLFxuICAgIHNlcnZlcl9lbnZpcm9ubWVudF9pZDogZGF0YS5zZXJ2ZXJfZW52aXJvbm1lbnRfaWQgPz8gbnVsbCxcbiAgICBkZWZhdWx0X3Byb21wdDogZGF0YS5kZWZhdWx0X3Byb21wdCA/PyBudWxsLFxuICAgIG1heF90b2tlbnM6IGRhdGEubWF4X3Rva2VucyA/PyBudWxsLFxuICAgIHRlbXBlcmF0dXJlOiBkYXRhLnRlbXBlcmF0dXJlID8/IG51bGwsXG4gICAgdG9wX3A6IGRhdGEudG9wX3AgPz8gbnVsbCxcbiAgICBhY3RpdmU6IGRhdGEuYWN0aXZlID8/IG51bGwsXG4gIH0pO1xuICByZXR1cm4gZ2V0VGVzdFByb2ZpbGVCeUlkKGRhdGEuaWQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlVGVzdFByb2ZpbGUoaWQ6IG51bWJlcikge1xuICBkYi5wcmVwYXJlKGBERUxFVEUgRlJPTSB0ZXN0X3Byb2ZpbGVzIFdIRVJFIGlkID0gP2ApLnJ1bihpZCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUZXN0UHJvZmlsZXMobGltaXQgPSAyNSk6IFRlc3RQcm9maWxlW10ge1xuICBjb25zdCBzdG10ID0gZGIucHJlcGFyZShcbiAgICBgU0VMRUNUICogRlJPTSB0ZXN0X3Byb2ZpbGVzIE9SREVSIEJZIGRhdGV0aW1lKGNyZWF0ZWRfYXQpIERFU0MgTElNSVQgP2BcbiAgKTtcbiAgcmV0dXJuIHN0bXQuYWxsKGxpbWl0KSBhcyBUZXN0UHJvZmlsZVtdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGVzdFByb2ZpbGVCeUlkKGlkOiBudW1iZXIpOiBUZXN0UHJvZmlsZSB7XG4gIGNvbnN0IHN0bXQgPSBkYi5wcmVwYXJlKGBTRUxFQ1QgKiBGUk9NIHRlc3RfcHJvZmlsZXMgV0hFUkUgaWQgPSA/YCk7XG4gIHJldHVybiBzdG10LmdldChpZCkgYXMgVGVzdFByb2ZpbGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbnNlcnRUZXN0U3RlcChzdGVwOiB7XG4gIHByb2ZpbGVfaWQ6IG51bWJlcjtcbiAgc3RlcF9vcmRlcjogbnVtYmVyO1xuICBzdGVwX25hbWU6IHN0cmluZztcbiAgYXBpX21ldGhvZDogc3RyaW5nO1xuICBhcGlfcGF0aDogc3RyaW5nO1xuICByZXF1ZXN0X2JvZHk/OiBzdHJpbmcgfCBudWxsO1xuICBleHBlY3RlZF9zdGF0dXM/OiBudW1iZXIgfCBudWxsO1xuICBleHBlY3RlZF9jb250YWlucz86IHN0cmluZyB8IG51bGw7XG4gIHBhc3NfcnVsZT86IHN0cmluZyB8IG51bGw7XG4gIG5vdGVzPzogc3RyaW5nIHwgbnVsbDtcbn0pOiBUZXN0U3RlcCB7XG4gIGNvbnN0IHN0bXQgPSBkYi5wcmVwYXJlKFxuICAgIGBJTlNFUlQgSU5UTyB0ZXN0X3N0ZXBzXG4gICAgICAocHJvZmlsZV9pZCwgc3RlcF9vcmRlciwgc3RlcF9uYW1lLCBhcGlfbWV0aG9kLCBhcGlfcGF0aCwgcmVxdWVzdF9ib2R5LCBleHBlY3RlZF9zdGF0dXMsIGV4cGVjdGVkX2NvbnRhaW5zLCBwYXNzX3J1bGUsIG5vdGVzKVxuICAgICBWQUxVRVNcbiAgICAgIChAcHJvZmlsZV9pZCwgQHN0ZXBfb3JkZXIsIEBzdGVwX25hbWUsIEBhcGlfbWV0aG9kLCBAYXBpX3BhdGgsIEByZXF1ZXN0X2JvZHksIEBleHBlY3RlZF9zdGF0dXMsIEBleHBlY3RlZF9jb250YWlucywgQHBhc3NfcnVsZSwgQG5vdGVzKWBcbiAgKTtcbiAgY29uc3QgaW5mbyA9IHN0bXQucnVuKHtcbiAgICBwcm9maWxlX2lkOiBzdGVwLnByb2ZpbGVfaWQsXG4gICAgc3RlcF9vcmRlcjogc3RlcC5zdGVwX29yZGVyLFxuICAgIHN0ZXBfbmFtZTogc3RlcC5zdGVwX25hbWUsXG4gICAgYXBpX21ldGhvZDogc3RlcC5hcGlfbWV0aG9kLFxuICAgIGFwaV9wYXRoOiBzdGVwLmFwaV9wYXRoLFxuICAgIHJlcXVlc3RfYm9keTogc3RlcC5yZXF1ZXN0X2JvZHkgPz8gbnVsbCxcbiAgICBleHBlY3RlZF9zdGF0dXM6IHN0ZXAuZXhwZWN0ZWRfc3RhdHVzID8/IG51bGwsXG4gICAgZXhwZWN0ZWRfY29udGFpbnM6IHN0ZXAuZXhwZWN0ZWRfY29udGFpbnMgPz8gbnVsbCxcbiAgICBwYXNzX3J1bGU6IHN0ZXAucGFzc19ydWxlID8/IG51bGwsXG4gICAgbm90ZXM6IHN0ZXAubm90ZXMgPz8gbnVsbCxcbiAgfSk7XG4gIHJldHVybiBnZXRUZXN0U3RlcEJ5SWQoTnVtYmVyKGluZm8ubGFzdEluc2VydFJvd2lkKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdGVwc0ZvclByb2ZpbGUocHJvZmlsZV9pZDogbnVtYmVyKTogVGVzdFN0ZXBbXSB7XG4gIGNvbnN0IHN0bXQgPSBkYi5wcmVwYXJlKFxuICAgIGBTRUxFQ1QgKiBGUk9NIHRlc3Rfc3RlcHMgV0hFUkUgcHJvZmlsZV9pZCA9ID8gT1JERVIgQlkgc3RlcF9vcmRlciBBU0NgXG4gICk7XG4gIHJldHVybiBzdG10LmFsbChwcm9maWxlX2lkKSBhcyBUZXN0U3RlcFtdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGVzdFN0ZXBCeUlkKGlkOiBudW1iZXIpOiBUZXN0U3RlcCB7XG4gIGNvbnN0IHN0bXQgPSBkYi5wcmVwYXJlKGBTRUxFQ1QgKiBGUk9NIHRlc3Rfc3RlcHMgV0hFUkUgaWQgPSA/YCk7XG4gIHJldHVybiBzdG10LmdldChpZCkgYXMgVGVzdFN0ZXA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVUZXN0U3RlcChkYXRhOiB7XG4gIGlkOiBudW1iZXI7XG4gIHN0ZXBfb3JkZXI/OiBudW1iZXI7XG4gIHN0ZXBfbmFtZT86IHN0cmluZztcbiAgYXBpX21ldGhvZD86IHN0cmluZztcbiAgYXBpX3BhdGg/OiBzdHJpbmc7XG4gIHJlcXVlc3RfYm9keT86IHN0cmluZyB8IG51bGw7XG4gIGV4cGVjdGVkX3N0YXR1cz86IG51bWJlciB8IG51bGw7XG4gIGV4cGVjdGVkX2NvbnRhaW5zPzogc3RyaW5nIHwgbnVsbDtcbiAgcGFzc19ydWxlPzogc3RyaW5nIHwgbnVsbDtcbiAgbm90ZXM/OiBzdHJpbmcgfCBudWxsO1xufSk6IFRlc3RTdGVwIHtcbiAgY29uc3Qgc3RtdCA9IGRiLnByZXBhcmUoXG4gICAgYFVQREFURSB0ZXN0X3N0ZXBzXG4gICAgIFNFVCBzdGVwX29yZGVyID0gQ09BTEVTQ0UoQHN0ZXBfb3JkZXIsIHN0ZXBfb3JkZXIpLFxuICAgICAgICAgc3RlcF9uYW1lID0gQ09BTEVTQ0UoQHN0ZXBfbmFtZSwgc3RlcF9uYW1lKSxcbiAgICAgICAgIGFwaV9tZXRob2QgPSBDT0FMRVNDRShAYXBpX21ldGhvZCwgYXBpX21ldGhvZCksXG4gICAgICAgICBhcGlfcGF0aCA9IENPQUxFU0NFKEBhcGlfcGF0aCwgYXBpX3BhdGgpLFxuICAgICAgICAgcmVxdWVzdF9ib2R5ID0gQ09BTEVTQ0UoQHJlcXVlc3RfYm9keSwgcmVxdWVzdF9ib2R5KSxcbiAgICAgICAgIGV4cGVjdGVkX3N0YXR1cyA9IENPQUxFU0NFKEBleHBlY3RlZF9zdGF0dXMsIGV4cGVjdGVkX3N0YXR1cyksXG4gICAgICAgICBleHBlY3RlZF9jb250YWlucyA9IENPQUxFU0NFKEBleHBlY3RlZF9jb250YWlucywgZXhwZWN0ZWRfY29udGFpbnMpLFxuICAgICAgICAgcGFzc19ydWxlID0gQ09BTEVTQ0UoQHBhc3NfcnVsZSwgcGFzc19ydWxlKSxcbiAgICAgICAgIG5vdGVzID0gQ09BTEVTQ0UoQG5vdGVzLCBub3RlcylcbiAgICAgV0hFUkUgaWQgPSBAaWRgXG4gICk7XG4gIHN0bXQucnVuKHtcbiAgICBpZDogZGF0YS5pZCxcbiAgICBzdGVwX29yZGVyOiBkYXRhLnN0ZXBfb3JkZXIsXG4gICAgc3RlcF9uYW1lOiBkYXRhLnN0ZXBfbmFtZSxcbiAgICBhcGlfbWV0aG9kOiBkYXRhLmFwaV9tZXRob2QsXG4gICAgYXBpX3BhdGg6IGRhdGEuYXBpX3BhdGgsXG4gICAgcmVxdWVzdF9ib2R5OiBkYXRhLnJlcXVlc3RfYm9keSA/PyBudWxsLFxuICAgIGV4cGVjdGVkX3N0YXR1czogZGF0YS5leHBlY3RlZF9zdGF0dXMgPz8gbnVsbCxcbiAgICBleHBlY3RlZF9jb250YWluczogZGF0YS5leHBlY3RlZF9jb250YWlucyA/PyBudWxsLFxuICAgIHBhc3NfcnVsZTogZGF0YS5wYXNzX3J1bGUgPz8gbnVsbCxcbiAgICBub3RlczogZGF0YS5ub3RlcyA/PyBudWxsLFxuICB9KTtcbiAgcmV0dXJuIGdldFRlc3RTdGVwQnlJZChkYXRhLmlkKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZVRlc3RTdGVwKGlkOiBudW1iZXIpIHtcbiAgZGIucHJlcGFyZShgREVMRVRFIEZST00gdGVzdF9zdGVwcyBXSEVSRSBpZCA9ID9gKS5ydW4oaWQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBzZXJ0U3dhZ2dlckVuZHBvaW50KGRhdGE6IHtcbiAgbWV0aG9kOiBzdHJpbmc7XG4gIHBhdGg6IHN0cmluZztcbiAgc3VtbWFyeT86IHN0cmluZyB8IG51bGw7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nIHwgbnVsbDtcbiAgcmVxdWVzdF9zY2hlbWE/OiBzdHJpbmcgfCBudWxsO1xuICByZXNwb25zZV9zY2hlbWE/OiBzdHJpbmcgfCBudWxsO1xufSk6IFN3YWdnZXJFbmRwb2ludCB7XG4gIGNvbnN0IHN0bXQgPSBkYi5wcmVwYXJlKFxuICAgIGBJTlNFUlQgSU5UTyBzd2FnZ2VyX2VuZHBvaW50c1xuICAgICAgKG1ldGhvZCwgcGF0aCwgc3VtbWFyeSwgZGVzY3JpcHRpb24sIHJlcXVlc3Rfc2NoZW1hLCByZXNwb25zZV9zY2hlbWEpXG4gICAgIFZBTFVFU1xuICAgICAgKEBtZXRob2QsIEBwYXRoLCBAc3VtbWFyeSwgQGRlc2NyaXB0aW9uLCBAcmVxdWVzdF9zY2hlbWEsIEByZXNwb25zZV9zY2hlbWEpXG4gICAgIE9OIENPTkZMSUNUKG1ldGhvZCwgcGF0aCkgRE8gVVBEQVRFIFNFVFxuICAgICAgc3VtbWFyeSA9IGV4Y2x1ZGVkLnN1bW1hcnksXG4gICAgICBkZXNjcmlwdGlvbiA9IGV4Y2x1ZGVkLmRlc2NyaXB0aW9uLFxuICAgICAgcmVxdWVzdF9zY2hlbWEgPSBleGNsdWRlZC5yZXF1ZXN0X3NjaGVtYSxcbiAgICAgIHJlc3BvbnNlX3NjaGVtYSA9IGV4Y2x1ZGVkLnJlc3BvbnNlX3NjaGVtYSxcbiAgICAgIGxhc3Rfc3luY2VkID0gZGF0ZXRpbWUoJ25vdycpYFxuICApO1xuICBzdG10LnJ1bih7XG4gICAgbWV0aG9kOiBkYXRhLm1ldGhvZC50b1VwcGVyQ2FzZSgpLFxuICAgIHBhdGg6IGRhdGEucGF0aCxcbiAgICBzdW1tYXJ5OiBkYXRhLnN1bW1hcnkgPz8gbnVsbCxcbiAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbiA/PyBudWxsLFxuICAgIHJlcXVlc3Rfc2NoZW1hOiBkYXRhLnJlcXVlc3Rfc2NoZW1hID8/IG51bGwsXG4gICAgcmVzcG9uc2Vfc2NoZW1hOiBkYXRhLnJlc3BvbnNlX3NjaGVtYSA/PyBudWxsLFxuICB9KTtcbiAgY29uc3Qgcm93ID0gZGJcbiAgICAucHJlcGFyZShcbiAgICAgIGBTRUxFQ1QgKiBGUk9NIHN3YWdnZXJfZW5kcG9pbnRzIFdIRVJFIG1ldGhvZCA9ID8gQU5EIHBhdGggPSA/YFxuICAgIClcbiAgICAuZ2V0KGRhdGEubWV0aG9kLnRvVXBwZXJDYXNlKCksIGRhdGEucGF0aCk7XG4gIHJldHVybiByb3cgYXMgU3dhZ2dlckVuZHBvaW50O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3dhZ2dlckVuZHBvaW50cygpOiBTd2FnZ2VyRW5kcG9pbnRbXSB7XG4gIGNvbnN0IHN0bXQgPSBkYi5wcmVwYXJlKFxuICAgIGBTRUxFQ1QgKiBGUk9NIHN3YWdnZXJfZW5kcG9pbnRzIE9SREVSIEJZIHBhdGgsIG1ldGhvZGBcbiAgKTtcbiAgcmV0dXJuIHN0bXQuYWxsKCkgYXMgU3dhZ2dlckVuZHBvaW50W107XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVTd2FnZ2VyRW5kcG9pbnQoaWQ6IG51bWJlcikge1xuICBkYi5wcmVwYXJlKGBERUxFVEUgRlJPTSBzd2FnZ2VyX2VuZHBvaW50cyBXSEVSRSBpZCA9ID9gKS5ydW4oaWQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY291bnRUZXN0U3RlcHMoKTogbnVtYmVyIHtcbiAgY29uc3Qgcm93ID0gZGJcbiAgICAucHJlcGFyZShgU0VMRUNUIENPVU5UKCopIGFzIGNvdW50IEZST00gdGVzdF9zdGVwc2ApXG4gICAgLmdldCgpIGFzIHsgY291bnQ6IG51bWJlciB9IHwgdW5kZWZpbmVkO1xuICByZXR1cm4gcm93Py5jb3VudCA/PyAwO1xufVxuXG5leHBvcnQgeyBkYiB9O1xuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVNlcnZlckVudmlyb25tZW50KGRhdGE6IHtcbiAgaWQ6IG51bWJlcjtcbiAgbmFtZT86IHN0cmluZztcbiAgaG9zdG5hbWU/OiBzdHJpbmcgfCBudWxsO1xuICBpcF9hZGRyZXNzPzogc3RyaW5nIHwgbnVsbDtcbiAgZ3B1X21vZGVsPzogc3RyaW5nIHwgbnVsbDtcbiAgZ3B1X3ZyYW1fZ2I/OiBudW1iZXIgfCBudWxsO1xuICBjcHVfbW9kZWw/OiBzdHJpbmcgfCBudWxsO1xuICBvc192ZXJzaW9uPzogc3RyaW5nIHwgbnVsbDtcbiAgd3NsX3ZlcnNpb24/OiBzdHJpbmcgfCBudWxsO1xuICByb2NtX3ZlcnNpb24/OiBzdHJpbmcgfCBudWxsO1xuICBub3Rlcz86IHN0cmluZyB8IG51bGw7XG59KTogU2VydmVyRW52aXJvbm1lbnQge1xuICBjb25zdCBzdG10ID0gZGIucHJlcGFyZShcbiAgICBgVVBEQVRFIHNlcnZlcl9lbnZpcm9ubWVudHNcbiAgICAgU0VUIG5hbWUgPSBDT0FMRVNDRShAbmFtZSwgbmFtZSksXG4gICAgICAgICBob3N0bmFtZSA9IENPQUxFU0NFKEBob3N0bmFtZSwgaG9zdG5hbWUpLFxuICAgICAgICAgaXBfYWRkcmVzcyA9IENPQUxFU0NFKEBpcF9hZGRyZXNzLCBpcF9hZGRyZXNzKSxcbiAgICAgICAgIGdwdV9tb2RlbCA9IENPQUxFU0NFKEBncHVfbW9kZWwsIGdwdV9tb2RlbCksXG4gICAgICAgICBncHVfdnJhbV9nYiA9IENPQUxFU0NFKEBncHVfdnJhbV9nYiwgZ3B1X3ZyYW1fZ2IpLFxuICAgICAgICAgY3B1X21vZGVsID0gQ09BTEVTQ0UoQGNwdV9tb2RlbCwgY3B1X21vZGVsKSxcbiAgICAgICAgIG9zX3ZlcnNpb24gPSBDT0FMRVNDRShAb3NfdmVyc2lvbiwgb3NfdmVyc2lvbiksXG4gICAgICAgICB3c2xfdmVyc2lvbiA9IENPQUxFU0NFKEB3c2xfdmVyc2lvbiwgd3NsX3ZlcnNpb24pLFxuICAgICAgICAgcm9jbV92ZXJzaW9uID0gQ09BTEVTQ0UoQHJvY21fdmVyc2lvbiwgcm9jbV92ZXJzaW9uKSxcbiAgICAgICAgIG5vdGVzID0gQ09BTEVTQ0UoQG5vdGVzLCBub3RlcylcbiAgICAgV0hFUkUgaWQgPSBAaWRgXG4gICk7XG4gIHN0bXQucnVuKHtcbiAgICBpZDogZGF0YS5pZCxcbiAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgaG9zdG5hbWU6IGRhdGEuaG9zdG5hbWUgPz8gbnVsbCxcbiAgICBpcF9hZGRyZXNzOiBkYXRhLmlwX2FkZHJlc3MgPz8gbnVsbCxcbiAgICBncHVfbW9kZWw6IGRhdGEuZ3B1X21vZGVsID8/IG51bGwsXG4gICAgZ3B1X3ZyYW1fZ2I6IGRhdGEuZ3B1X3ZyYW1fZ2IgPz8gbnVsbCxcbiAgICBjcHVfbW9kZWw6IGRhdGEuY3B1X21vZGVsID8/IG51bGwsXG4gICAgb3NfdmVyc2lvbjogZGF0YS5vc192ZXJzaW9uID8/IG51bGwsXG4gICAgd3NsX3ZlcnNpb246IGRhdGEud3NsX3ZlcnNpb24gPz8gbnVsbCxcbiAgICByb2NtX3ZlcnNpb246IGRhdGEucm9jbV92ZXJzaW9uID8/IG51bGwsXG4gICAgbm90ZXM6IGRhdGEubm90ZXMgPz8gbnVsbCxcbiAgfSk7XG4gIGNvbnN0IHJvdyA9IGRiXG4gICAgLnByZXBhcmUoYFNFTEVDVCAqIEZST00gc2VydmVyX2Vudmlyb25tZW50cyBXSEVSRSBpZCA9ID9gKVxuICAgIC5nZXQoZGF0YS5pZCk7XG4gIHJldHVybiByb3cgYXMgU2VydmVyRW52aXJvbm1lbnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVTZXJ2ZXJFbnZpcm9ubWVudChpZDogbnVtYmVyKSB7XG4gIGRiLnByZXBhcmUoYERFTEVURSBGUk9NIHNlcnZlcl9lbnZpcm9ubWVudHMgV0hFUkUgaWQgPSA/YCkucnVuKGlkKTtcbn1cbiJdLCJuYW1lcyI6WyJEYXRhYmFzZSIsImZzIiwicGF0aCIsImRiUGF0aCIsInByb2Nlc3MiLCJlbnYiLCJMT0dfREJfUEFUSCIsImpvaW4iLCJjd2QiLCJta2RpclN5bmMiLCJkaXJuYW1lIiwicmVjdXJzaXZlIiwiZGIiLCJwcmFnbWEiLCJleGVjIiwiZW5zdXJlQ29sdW1uIiwidGFibGUiLCJjb2x1bW4iLCJkZWZpbml0aW9uIiwiY29sdW1ucyIsInByZXBhcmUiLCJhbGwiLCJzb21lIiwiY29sIiwibmFtZSIsImdldFJlY2VudFJ1bnMiLCJsaW1pdCIsInN0bXQiLCJpbnNlcnRUZXN0UnVuIiwiZGF0YSIsImluZm8iLCJydW4iLCJtb2RlbF9uYW1lIiwic2NlbmFyaW8iLCJub3RlcyIsImdldFJ1bkJ5SWQiLCJOdW1iZXIiLCJsYXN0SW5zZXJ0Um93aWQiLCJ1cGRhdGVSdW5TdGF0dXMiLCJpZCIsInN0YXR1cyIsImxvYWRfZHVyYXRpb25fbXMiLCJnZXQiLCJpbnNlcnRMb2dFdmVudCIsInJ1bl9pZCIsIm1vZGVsX2lkIiwidGVzdF9wcm9maWxlX2lkIiwic291cmNlIiwibGV2ZWwiLCJtZXNzYWdlIiwiZ2V0TG9nQnlJZCIsImdldFJlY2VudExvZ3MiLCJpbnNlcnRPclVwZGF0ZVRlc3RNb2RlbCIsImV4aXN0aW5nIiwiZ2V0VGVzdE1vZGVsQnlOYW1lIiwic291cmNlX21vZGVsX2lkIiwiaGZfcGF0aCIsImNhY2hlX2xvY2F0aW9uIiwiY29tcGF0aWJpbGl0eV9zdGF0dXMiLCJtZXRhZGF0YSIsImdldFRlc3RNb2RlbEJ5SWQiLCJnZXRUZXN0TW9kZWxzIiwicmVzdWx0IiwiZ2V0SHVnZ2luZ2ZhY2VNZXRhVGFncyIsImdldEh1Z2dpbmdmYWNlTWV0YUJ5SWQiLCJ1cGRhdGVIdWdnaW5nZmFjZU1ldGFUYWciLCJ1cGRhdGVzIiwicGFyYW1zIiwiYWN0aXZlIiwidW5kZWZpbmVkIiwicHVzaCIsImRldGFpbGVkIiwiZXh0ZW5zaXZlIiwibGVuZ3RoIiwiZ2V0SHVnZ2luZ2ZhY2VNZXRhZGF0YUZvck1vZGVsIiwibW9kZWxfdGVzdF9pZCIsImRlbGV0ZUh1Z2dpbmdmYWNlTWV0YWRhdGFGb3JNb2RlbCIsInVwc2VydE1vZGVsUGFyYW1ldGVyIiwicGFyYW0iLCJkZXNjcmlwdGlvbiIsImRhdGFfdHlwZSIsInVuaXQiLCJkZWZhdWx0X3ZhbHVlIiwicm93IiwiZ2V0TW9kZWxQYXJhbWV0ZXJzIiwiaW5zZXJ0TW9kZWxQYXJhbWV0ZXJWYWx1ZSIsInBhcmFtZXRlcl9pZCIsInZhbHVlIiwianNvbl92YWx1ZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJnZXRNb2RlbFBhcmFtZXRlclZhbHVlQnlJZCIsImdldFBhcmFtZXRlclZhbHVlc0Zvck1vZGVsIiwiZGVsZXRlTW9kZWxQYXJhbWV0ZXJWYWx1ZSIsInVwc2VydFNlcnZlckVudmlyb25tZW50IiwiaG9zdG5hbWUiLCJpcF9hZGRyZXNzIiwiZ3B1X21vZGVsIiwiZ3B1X3ZyYW1fZ2IiLCJjcHVfbW9kZWwiLCJvc192ZXJzaW9uIiwid3NsX3ZlcnNpb24iLCJyb2NtX3ZlcnNpb24iLCJnZXRTZXJ2ZXJFbnZpcm9ubWVudHMiLCJpbnNlcnRUZXN0UHJvZmlsZSIsInByb2ZpbGUiLCJzZXJ2ZXJfZW52aXJvbm1lbnRfaWQiLCJkZWZhdWx0X3Byb21wdCIsIm1heF90b2tlbnMiLCJ0ZW1wZXJhdHVyZSIsInRvcF9wIiwiZ2V0VGVzdFByb2ZpbGVCeUlkIiwidXBkYXRlVGVzdFByb2ZpbGUiLCJkZWxldGVUZXN0UHJvZmlsZSIsImdldFRlc3RQcm9maWxlcyIsImluc2VydFRlc3RTdGVwIiwic3RlcCIsInByb2ZpbGVfaWQiLCJzdGVwX29yZGVyIiwic3RlcF9uYW1lIiwiYXBpX21ldGhvZCIsImFwaV9wYXRoIiwicmVxdWVzdF9ib2R5IiwiZXhwZWN0ZWRfc3RhdHVzIiwiZXhwZWN0ZWRfY29udGFpbnMiLCJwYXNzX3J1bGUiLCJnZXRUZXN0U3RlcEJ5SWQiLCJnZXRTdGVwc0ZvclByb2ZpbGUiLCJ1cGRhdGVUZXN0U3RlcCIsImRlbGV0ZVRlc3RTdGVwIiwidXBzZXJ0U3dhZ2dlckVuZHBvaW50IiwibWV0aG9kIiwidG9VcHBlckNhc2UiLCJzdW1tYXJ5IiwicmVxdWVzdF9zY2hlbWEiLCJyZXNwb25zZV9zY2hlbWEiLCJnZXRTd2FnZ2VyRW5kcG9pbnRzIiwiZGVsZXRlU3dhZ2dlckVuZHBvaW50IiwiY291bnRUZXN0U3RlcHMiLCJjb3VudCIsInVwZGF0ZVNlcnZlckVudmlyb25tZW50IiwiZGVsZXRlU2VydmVyRW52aXJvbm1lbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/zod"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fhuggingface%2Fmeta%2Froute&page=%2Fapi%2Fhuggingface%2Fmeta%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fhuggingface%2Fmeta%2Froute.ts&appDir=%2Fapp%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fapp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();